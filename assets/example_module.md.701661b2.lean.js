import{f as k,r as u,h as _,i as w,E as l,u as g,a9 as ls,R as G,G as $,e as X,n as P,F as h,D as A,l as x,z as B,A as os,B as T,o as es,S as ts,O as rs}from"./chunks/framework.c6b36256.js";import{E as cs,a as R,b as Ds,c as ys,d as ss,e as I,f as Fs,g as Cs,h as As,i as is,j as us,k as ms,l as ns,m as ds,n as fs,o as as,p as gs,q as vs,r as Es,s as bs,t as hs,u as xs,v as _s,w as Bs}from"./chunks/index.bfd89616.js";import"./chunks/theme.e34f5047.js";import"./chunks/commonjsHelpers.28e086c5.js";const ks=k({__name:"Page",setup(F,{expose:D}){let p=u(1),a=u(10),t=u(0);function n(o){p.value=o,E().Table.getTableData(null,"page")}function r(o){p.value=1,m(o),E().Table.getTableData(null,"page")}function c(){return a}function C(){return p}function m(o){a.value=o}function i(o){p.value=o}function d(o){t.value=o}const E=G("getRefs");return D({getPageNum:C,getPageSize:c,setPageNum:i,setTotal:d}),(o,f)=>{const b=$("el-pagination");return _(),w("div",null,[l(b,{background:"",onSizeChange:r,onCurrentChange:n,currentPage:g(p),"onUpdate:currentPage":f[0]||(f[0]=s=>ls(p)?p.value=s:p=s),layout:"prev, pager, next","page-size":g(a),total:g(t)},null,8,["currentPage","page-size","total"])])}}});(function(){try{var F=document.createElement("style");F.appendChild(document.createTextNode(".FormGenerator.FormGeneratorSearch{display:flex;justify-content:flex-start;align-items:flex-start;flex-wrap:wrap;flex-direction:row;gap:15px 10px}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item{width:calc(25% - 8px);margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem{margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__label-wrap{display:none}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__content{flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline){padding-bottom:45px}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem{margin:0;height:64px;position:absolute;bottom:0;right:0;width:100%;box-shadow:1px 2px 10px #9ab7ff80;z-index:1;z-index:11;padding:0 16px;box-sizing:border-box}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem .el-form-item__content{display:flex;justify-content:flex-end;align-items:center;flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .el-form-item__content>div:not(.el-switch){width:100%}.FormGenerator .searchItem{flex-grow:1;flex-shrink:0}.FormGenerator .searchItem .el-form-item__content{justify-content:flex-end}.FormGenerator .expandBtn i{transition:all .3s}.FormGenerator .expandBtn.down i{transform:rotate(180deg)}.FormGenerator .el-select,.FormGenerator .el-input,.FormGenerator .el-cascader,.FormGenerator .el-date-editor.el-input,.FormGenerator .el-date-editor.el-input__wrapper,.TableGenerator .el-scrollbar__view{width:100%}.TableGenerator .content-wrapper{white-space:nowrap;display:inline-block}.StepsGenerator{width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-start;gap:10px}.StepsGenerator .btn-group{width:100%;display:flex;justify-content:center;gap:10px}")),document.head.appendChild(F)}catch(D){console.error("vite-plugin-css-injected-by-js",D)}})();const ws=k({name:"TableGenerator",setup(F,{expose:D,attrs:p,slots:a,emit:t}){const n=u(),r=p;let c;const C=new Date().getTime(),m=u("auto");return X(()=>r.loading,i=>{i?P(()=>{c=cs.service({target:`.el-table-${C}`,text:"加载中"})}):c==null||c.close()},{immediate:!0}),r.operationWidth?m.value=r.operationWidth:X(()=>r.data,()=>{P(()=>{if(!isNaN(m.value)&&Array.isArray(r.data)&&m.value>32&&r.data.length===0)return;const i=[];document.querySelectorAll(`.el-table-${C} .content-wrapper`).forEach(d=>{i.push(d.offsetWidth)}),m.value=Math.max(...i)+32})},{immediate:!0}),D(()=>n.value),()=>{function i(E){return E.map(o=>["selection","index","expand"].includes(o.type)?l(R,A({type:o.type},o),{...o==null?void 0:o.slots}):l(R,A({"show-overflow-tooltip":!0,align:"left"},o),{default:f=>{var b;return o.children&&Array.isArray(o.children)&&o.children.length>0?i(o.children):a[o.prop]?l(h,null,[(b=a[o.prop])==null?void 0:b.call(a,{$index:f.$index,row:f.row})]):o.formatter?l(h,null,[o.formatter({$index:f.$index,row:f.row})??"-"]):l(h,null,[f.row[o.prop]??"-"])},...o==null?void 0:o.slots}))}function d(){return l(ys,A({ref:n,stripe:!0},r,{class:`TableGenerator el-table-${C}`}),{default:()=>[i(r.tableOption),a!=null&&a.operation?l(R,{fixed:"right",label:"操作",width:m.value},{default:E=>{var o;return l("div",{class:"content-wrapper"},[(o=a.operation)==null?void 0:o.call(a,{$index:E.$index,row:E.row})])}}):""],empty:()=>a!=null&&a.empty?a==null?void 0:a.empty():l(Ds,{description:"暂无数据"},null),append:()=>a!=null&&a.append?a==null?void 0:a.append():""})}return l(h,null,[d()])}}});/*! Element Plus Icons Vue v2.1.0 */var S=(F,D)=>{let p=F.__vccOpts||F;for(let[a,t]of D)p[a]=t;return p},Is={name:"ArrowUp"},qs={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Ts=B("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),Gs=[Ts];function Rs(F,D,p,a,t,n){return _(),w("svg",qs,Gs)}var Ps=S(Is,[["render",Rs],["__file","arrow-up.vue"]]),$s={name:"Refresh"},Ss={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Vs=B("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),zs=[Vs];function Os(F,D,p,a,t,n){return _(),w("svg",Ss,zs)}var Ns=S($s,[["render",Os],["__file","refresh.vue"]]),js={name:"Search"},Ms={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Us=B("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),Ys=[Us];function Hs(F,D,p,a,t,n){return _(),w("svg",Ms,Ys)}var Ls=S(js,[["render",Hs],["__file","search.vue"]]);const ps=k({name:"FormGenerator",setup(F,{expose:D,attrs:p,slots:a,emit:t}){const n=p,r=u(),c={},C=u(!1),m=isNaN(n.column)?4:n.column>=4?n.column:4,i={submit:()=>{r.value.validate(o=>{o&&t("submit")})},cancel:o=>{var f,b;n.onCancel?t("cancel"):(b=(f=d(o.target).querySelector(".el-dialog__headerbtn"))==null?void 0:f.click)==null||b.call(f)},reset:()=>{r.value.resetFields(),t("submit","init")}};function d(o){return o.parentElement.classList.value.split(" ").includes("el-dialog")?o.parentElement:d(o.parentElement)}function E(o){C.value=o,n.formOption.forEach((f,b)=>{b>m-2&&(f.show=o)})}return n.formOption.length>=m-2&&(n==null?void 0:n.type)==="search"&&E(!1),D(()=>({...r.value,...i,$refs:c})),()=>{function o(){return l(Fs,A({class:`FormGenerator ${(n==null?void 0:n.type)==="search"?"FormGeneratorSearch":""} ${(n==null?void 0:n.type)==="dialog"?"FormGeneratorDialog":""}`,inline:(n==null?void 0:n.type)==="search","validate-on-rule-change":!1,"label-width":n.labelWidth||"auto"},n,{ref:r}),{default:()=>[n.formOption.map(s=>{var q;return l(ss,A(s.formItem,{style:s.hasOwnProperty("show")&&s.show===!1?"display:none":"",key:s.formItem.prop}),{default:()=>[f(s)],...(q=s.formItem)==null?void 0:q.slots})}),n.disabled===!0||n.noFooter||!n.onSubmit?"":l(ss,{class:`btnItem ${C.value?"searchItem":""}`},{default:()=>a!=null&&a.default&&typeof(a==null?void 0:a.default()[0].type)=="string"?l(h,null,[a.default()[0].children]):(n==null?void 0:n.type)==="search"?b():l(h,null,[(n==null?void 0:n.type)==="dialog"?l(I,{onClick:i.cancel},{default:()=>[x("取消")]}):"",l(I,{type:"primary",onClick:i.submit,loading:n.loading},{default:()=>[x("确定")]})]),label:()=>""})]})}function f(s){var q,V,z,O,N,j,M,U,Y,H,L,W,J,K,Q;switch(c[s.formItem.prop]=u(),s.type){case"input":return l(_s,A({ref:c[s.formItem.prop],clearable:!0,maxlength:((q=s==null?void 0:s.control)==null?void 0:q.type)==="textarea"?100:30},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),{...(V=s==null?void 0:s.control)==null?void 0:V.slots});case"input-number":return l(xs,A({ref:c[s.formItem.prop],min:0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),null);case"select":return l(hs,A({ref:c[s.formItem.prop],clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),{default:()=>{var e,v;return[((e=s==null?void 0:s.control)==null?void 0:e.option)instanceof Array?(v=s==null?void 0:s.control)==null?void 0:v.option.map(y=>l(bs,A(y,{key:y.value}),{...y==null?void 0:y.slots})):""]},...(z=s==null?void 0:s.control)==null?void 0:z.slots});case"tree-select":return l(Es,A({ref:c[s.formItem.prop],clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),{...(O=s==null?void 0:s.control)==null?void 0:O.slots});case"cascader":return l(vs,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),{...(N=s==null?void 0:s.control)==null?void 0:N.slots});case"radio":return l(as,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),{default:()=>{var e,v;return[((e=s==null?void 0:s.control)==null?void 0:e.radioGroup)instanceof Array?(v=s==null?void 0:s.control)==null?void 0:v.radioGroup.map(y=>l(gs,A(y,{label:y.value,key:y.label}),{default:()=>[y.label],...y==null?void 0:y.slots})):""]}});case"radio-button":return l(as,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),{default:()=>{var e,v;return[((e=s==null?void 0:s.control)==null?void 0:e.radioGroup)instanceof Array?(v=s==null?void 0:s.control)==null?void 0:v.radioGroup.map(y=>l(fs,A(y,{label:y.value,key:y.label}),{default:()=>[y.label],...y==null?void 0:y.slots})):""]}});case"checkbox":return l(ns,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),{default:()=>{var e,v;return[((e=s==null?void 0:s.control)==null?void 0:e.checkboxGroup)instanceof Array?(v=s==null?void 0:s.control)==null?void 0:v.checkboxGroup.map(y=>l(ds,A(y,{label:y.value,key:y.label}),{default:()=>[y.label],...y==null?void 0:y.slots})):""]}});case"checkbox-button":return l(ns,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),{default:()=>{var e,v;return[((e=s==null?void 0:s.control)==null?void 0:e.checkboxGroup)instanceof Array?(v=s==null?void 0:s.control)==null?void 0:v.checkboxGroup.map(y=>l(ms,A(y,{label:y.value,key:y.label}),{default:()=>[y.label],...y==null?void 0:y.slots})):""]}});case"date-picker":case"date-time-picker":const Z={datetimerange:"YYYY-MM-DD HH:mm:ss",daterange:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",date:"YYYY-MM-DD"}[((j=s==null?void 0:s.control)==null?void 0:j.type)||"date"];return l(us,A({ref:c[s.formItem.prop],clearable:!0,format:Z,"value-format":Z},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),{...(M=s==null?void 0:s.control)==null?void 0:M.slots});case"time-picker":return l(is,A({ref:c[s.formItem.prop],clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),null);case"switch":return l(As,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":e=>n.model[s.formItem.prop]=e}),null);case"upload":return l(Cs,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{"file-list":n.model[s.formItem.prop],"onUpdate:file-list":e=>n.model[s.formItem.prop]=e}),{default:()=>n.disabled?"":l(I,{type:"primary"},{default:()=>[x("上传文件")]}),...(U=s==null?void 0:s.control)==null?void 0:U.slots});case"slot":return(H=(Y=s==null?void 0:s.control)==null?void 0:Y.slots)!=null&&H.default&&typeof((W=(L=s==null?void 0:s.control)==null?void 0:L.slots)==null?void 0:W.default)=="function"?l(h,null,[(K=(J=s.control.slots).default)==null?void 0:K.call(J,{form:n.model,data:n.model[s.formItem.prop]})]):a[s.formItem.prop]?(Q=a[s.formItem.prop])==null?void 0:Q.call(a,{form:n.model,data:n.model[s.formItem.prop]}):n.model[s.formItem.prop]}}function b(){return l(h,null,[l(I,{type:"primary",onClick:i.submit,icon:Ls},{default:()=>[x("搜索")]}),l(I,{onClick:i.reset,icon:Ns},{default:()=>[x("重置")]}),n.type==="search"&&n.formOption.length>m-1?l(h,null,[l(I,{text:!0,type:"primary",class:`expandBtn ${C.value?"up":"down"}`,onClick:()=>{E(!C.value)},icon:Ps},{default:()=>[C.value?"收起":"展开"]})]):""])}return o()}}}),Ws=(F,D)=>F.find(p=>p.prop===D),Js=(F,D,p)=>{var a;const t=F.find(n=>n.formItem.prop===D);t&&(a=t==null?void 0:t.control)!=null&&a.option&&(t.control.option=p)},Ks=(F,D)=>F.find(p=>p.formItem.prop===D),Qs=(F,D,p,a)=>{if(!Array.isArray(F))return[];const t=[];let n=[];return a&&(n=Object.keys(a)),F.forEach(r=>{let c={label:typeof r=="string"?r:r[D],value:typeof r=="string"?r:r[p]};a&&n.forEach(C=>{c[C]=r[C]}),t.push(c)}),t},Zs=(F,D=[])=>{const p={input:"输入","input-number":"输入",select:"选择","tree-select":"选择",cascader:"选择",radio:"选择","radio-button":"选择",checkbox:"选择","checkbox-button":"选择","date-picker":"选择","date-time-picker":"选择","time-picker":"选择",switch:"选择",upload:"上传",slot:"完善"};return F.forEach(a=>{var t,n,r;const c={required:!0,message:`请${p[a.type]??"完善"}${a.formItem.label??""}`,trigger:"change"};if(!D.includes(a.formItem.prop)&&(((t=a.formItem)==null?void 0:t.rules)instanceof Object?a.formItem.rules=[c,a.formItem.rules]:Array.isArray((n=a.formItem)==null?void 0:n.rules)?a.formItem.rules.unshift(c):a.formItem.rules=[c],((r=a.formItem)==null?void 0:r.rules)instanceof Array))for(let C=0;C<a.formItem.rules.length;C++){let m=a.formItem.rules[C];m.message||(m.message="格式有误")}}),F},Xs=Object.freeze(Object.defineProperty({__proto__:null,getFormOption:Ks,getOption:Qs,getTableOption:Ws,setOption:Js,setRequired:Zs},Symbol.toStringTag,{value:"Module"})),sn=k({__name:"AddDialog",setup(F,{expose:D}){let p=u(),a=u(!1),t=u("新增"),n=u({}),r=u([{type:"input",formItem:{prop:"key1",label:"文本1"}},{type:"select",formItem:{prop:"key2",label:"文本2"},control:{option:[{label:"文本1",value:"值1"},{label:"文本2",value:"值2"}]}}]);Xs.setRequired(r.value);async function c(i){t.value=i?"修改":"新增",a.value=!0,P(async()=>{var d;(d=p.value())==null||d.resetFields(),t.value})}async function C(){a.value=!1,t.value,Bs.success(`${t.value}成功`),m().Table.getTableData()}const m=G("getRefs");return D({openDialog:c}),(i,d)=>{const E=$("el-dialog");return _(),os(E,{title:g(t),modelValue:g(a),"onUpdate:modelValue":d[0]||(d[0]=o=>ls(a)?a.value=o:a=o),width:"500px"},{default:T(()=>[l(g(ps),{type:"dialog",ref_key:"RefFormGenerator",ref:p,model:g(n),formOption:g(r),onSubmit:C},null,8,["model","formOption"])]),_:1},8,["title","modelValue"])}}}),nn=k({__name:"Form",setup(F,{expose:D}){let p=u({}),a=u([{type:"input",formItem:{prop:"key1",label:"字段1"}},{type:"select",formItem:{prop:"key2",label:"字段2"},control:{option:[{label:"文本1",value:"值1"}]}},{type:"input",formItem:{prop:"key3",label:"字段3"}},{type:"input",formItem:{prop:"key4",label:"字段4"}},{type:"input",formItem:{prop:"key5",label:"字段5"}}]);function t(){n().Page.setPageNum(1),n().Table.getTableData()}const n=G("getRefs");return D({form:p}),(r,c)=>(_(),os(g(ps),{type:"search",model:g(p),formOption:g(a),onSubmit:t},null,8,["model","formOption"]))}}),an={class:"Table"},ln={class:"tool"},on=k({__name:"Table",setup(F,{expose:D}){let p=u(!1),a=u([{prop:"key1",label:"文本1"},{prop:"key2",label:"文本2"},{prop:"key3",label:"文本3"},{prop:"key4",label:"文本4"},{prop:"key5",label:"文本5"}]),t=u([]);async function n(){c(),p.value=!0,p.value=!1}function r(C){c().AddDialog.openDialog(C)}es(()=>{n()});const c=G("getRefs");return D({getTableData:n}),(C,m)=>{const i=$("el-button");return _(),w("div",an,[B("div",ln,[l(i,{type:"primary",onClick:m[0]||(m[0]=d=>r())},{default:T(()=>[x("新增")]),_:1})]),l(g(ws),{data:g(t),loading:g(p),tableOption:g(a)},{operation:T(d=>[l(i,{link:"",type:"primary",onClick:E=>r(d.row.id)},{default:T(()=>[x("编辑")]),_:2},1032,["onClick"]),l(i,{link:"",type:"primary"},{default:T(()=>[x("删除")]),_:1})]),_:1},8,["data","loading","tableOption"])])}}}),pn={class:"Container"},en=k({__name:"index",setup(F){let D=u(),p=u(),a=u(),t=u();return ts("getRefs",()=>({Form:D.value,Table:p.value,Page:a.value,AddDialog:t.value})),(n,r)=>(_(),w("div",pn,[l(nn,{ref_key:"RefForm",ref:D,class:"Form"},null,512),l(on,{ref_key:"RefTable",ref:p,class:"Table"},null,512),l(ks,{ref_key:"RefPage",ref:a,class:"Page"},null,512),l(sn,{ref_key:"RefAddDialog",ref:t},null,512)]))}}),tn=B("h1",{id:"模板化模块",tabindex:"-1"},[x("模板化模块 "),B("a",{class:"header-anchor",href:"#模板化模块","aria-label":'Permalink to "模板化模块"'},"​")],-1),rn=B("p",null,"扁平化组件，将父级组件作为通信组件",-1),cn={class:"vp-raw"},Dn=rs("",14),mn=JSON.parse('{"title":"模板化模块","description":"","frontmatter":{},"headers":[],"relativePath":"example/module.md"}'),yn={name:"example/module.md"},dn=Object.assign(yn,{setup(F){return(D,p)=>(_(),w("div",null,[tn,rn,B("div",cn,[l(en)]),Dn]))}});export{mn as __pageData,dn as default};
