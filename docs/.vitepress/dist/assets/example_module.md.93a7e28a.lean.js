import{d as w,r as u,h as O,o as x,e as q,a as l,u as E,i as J,j as G,k as U,F as b,n as $,E as Z,l as P,m as ss,p as C,q as Y,s as L,v as T,b as h,x as ns,y as as,z as ls,A as os,B as ps,C as es,D as H,G as ts,H as rs,I as W,J as cs,K as Ds,L as ys,M as Fs,N as Cs,O as As,P as is,Q as us,f as k,c as K,w as R,R as ms,S as ds,T as fs,g as gs}from"./app.6e3f33a5.js";const Es=w({__name:"Page",setup(t,{expose:e}){let o=u(1),a=u(10),r=u(0);function n(y){o.value=y,f().Table.getTableData(null,"page")}function c(y){o.value=1,v(y),f().Table.getTableData(null,"page")}function A(){return a}function d(){return o}function v(y){a.value=y}function g(y){o.value=y}function i(y){r.value=y}const f=G("getRefs");return e({getPageNum:d,getPageSize:A,setPageNum:g,setTotal:i}),(y,s)=>{const F=O("el-pagination");return x(),q("div",null,[l(F,{background:"",onSizeChange:c,onCurrentChange:n,currentPage:E(o),"onUpdate:currentPage":s[0]||(s[0]=m=>J(o)?o.value=m:o=m),layout:"prev, pager, next","page-size":E(a),total:E(r)},null,8,["currentPage","page-size","total"])])}}}),vs=(t,e,o,a)=>{if(!Array.isArray(t))return[];const r=[];let n=[];return a&&(n=Object.keys(a)),t.forEach(c=>{let A={label:typeof c=="string"?c:c[e],value:typeof c=="string"?c:c[o]};a&&n.forEach(d=>{A[d]=c[d]}),r.push(A)}),r},Q=(t,e)=>t.filter(o=>o.formItem.prop===e)[0]||{type:"input",formItem:{prop:"",label:""}},bs=(t,e,o)=>{var a;const r={input:"输入","input-number":"输入",select:"选择","tree-select":"选择",cascader:"选择",radio:"选择","radio-button":"选择",checkbox:"选择","checkbox-button":"选择",datetime:"选择",time:"选择",switch:"选择",upload:"上传"},n=Q(t.formOption,t.field);if(Array.isArray(e)&&e.length===0)return Promise.reject(`请${r[n.type]||"完善"}${n.formItem.label}`);if(!e)return Promise.reject(`请${r[n.type]||"完善"}${n.formItem.label}`);if(!((a=n==null?void 0:n.formItem)!=null&&a.rules))return Promise.resolve();if(typeof n.formItem.rules.validator=="function")n.formItem.rules.validator(t,e).then(()=>o()).catch(c=>{var A;return o(new Error(c!=="err"?c:((A=n==null?void 0:n.formItem.rules)==null?void 0:A.message)??""))});else return n.formItem.rules.validator.test(e)?Promise.resolve():Promise.reject(n.formItem.rules.message||"格式有误")},hs=(t,e=[])=>{let o={};return t.forEach(a=>{var r,n;const c=typeof a=="string"?a:a.formItem.prop;e.includes(c)||(o[c]=[{required:!0,validator:bs,trigger:((n=(r=a.formItem)==null?void 0:r.rules)==null?void 0:n.trigger)??"blur",formOption:t}])}),o},xs={checkIphoneNum:(t,e)=>e?/(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(e)?Promise.resolve():Promise.reject("手机格式有误"):Promise.reject("请输入手机号")},_s=Object.freeze(Object.defineProperty({__proto__:null,CommonValidator:xs,getLabel:Q,getOption:vs,getRules:hs},Symbol.toStringTag,{value:"Module"}));(function(){try{var t=document.createElement("style");t.appendChild(document.createTextNode(".FormGenerator.FormGeneratorSearch{display:flex;justify-content:flex-start;align-items:flex-start;flex-wrap:wrap;flex-direction:row;gap:15px 10px}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item{width:calc(25% - 8px);margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem{margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__label-wrap{display:none}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__content{flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline){padding-bottom:45px}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem{margin:0;height:64px;position:absolute;bottom:0;right:0;width:100%;box-shadow:1px 2px 10px #9ab7ff80;z-index:1;z-index:11;padding:0 16px;box-sizing:border-box}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem .el-form-item__content{display:flex;justify-content:flex-end;align-items:center;flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .el-form-item__content>div{width:100%}.FormGenerator .searchItem{flex-grow:1;flex-shrink:0}.FormGenerator .searchItem .el-form-item__content{justify-content:flex-end}.FormGenerator .expandBtn i{transition:all .3s}.FormGenerator .expandBtn.down i{transform:rotate(180deg)}.FormGenerator .el-select,.FormGenerator .el-input,.FormGenerator .el-cascader,.FormGenerator .el-date-editor.el-input,.FormGenerator .el-date-editor.el-input__wrapper,.TableGenerator .el-scrollbar__view{width:100%}")),document.head.appendChild(t)}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Bs=w({name:"TableGenerator",setup(t,{expose:e,attrs:o,slots:a,emit:r}){const n=o;let c,A=new Date().getTime(),d=u(!1),v=u(0);return U(()=>n.loading,g=>{g?$(()=>{c=Z.service({target:`.el-table-${A}`})}):c==null||c.close()},{immediate:!0}),U(()=>n.data,g=>{if(!(a!=null&&a.operation)||g.length===0)return d.value=!0;d.value=!1,$(()=>{let i=0;document.querySelectorAll(".content-wrapper-width").forEach(f=>{f.offsetWidth>i&&(i=f.offsetWidth)}),v.value=i>0?i+32:"auto",d.value=!0})},{immediate:!0}),()=>{function g(y){return y.map(s=>["selection","index","expand"].includes(s.type)?l(P,C({type:s.type},s),{...s==null?void 0:s.slot}):l(P,C({"show-overflow-tooltip":!0,align:"left"},s),{default:F=>{var m;return s.children&&Array.isArray(s.children)&&s.children.length>0?g(s.children):a[s.prop]?l(b,null,[(m=a[s.prop])==null?void 0:m.call(a,{$index:F.$index,row:F.row})]):s.formatter?l(b,null,[s.formatter({$index:F.$index,row:F.row})??"-"]):l(b,null,[F.row[s.prop]??"-"])},...s==null?void 0:s.slot}))}function i(){return l(Y,C({stripe:!0},n,{class:`TableGenerator el-table-${A}`}),{default:()=>[g(n.tableOption),a!=null&&a.operation?l(P,{fixed:"right",label:"操作",width:v.value},{default:y=>{var s;return l("div",{class:"content-wrapper"},[(s=a.operation)==null?void 0:s.call(a,{$index:y.$index,row:y.row})])}}):""],empty:()=>a!=null&&a.empty?a==null?void 0:a.empty():l(ss,{description:"暂无数据"},null),append:()=>a!=null&&a.append?a==null?void 0:a.append():""})}function f(){return l(Y,C(o,{class:`TableGenerator el-table-${A}`}),{default:()=>[l(P,{fixed:"right"},{default:y=>{var s;return l("div",{style:"display:inline-block;opacity:0",class:"content-wrapper content-wrapper-width"},[(s=a.operation)==null?void 0:s.call(a,{$index:y.$index,row:y.row})])}})]})}return l(b,null,[d.value?i():f()])}}});/*! Element Plus Icons Vue v2.0.10 */var S=(t,e)=>{let o=t.__vccOpts||t;for(let[a,r]of e)o[a]=r;return o},ks={name:"ArrowUp"},ws={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},qs=k("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),Is=[qs];function Ts(t,e,o,a,r,n){return x(),q("svg",ws,Is)}var Rs=S(ks,[["render",Ts],["__file","arrow-up.vue"]]),Ps={name:"Refresh"},Gs={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},$s=k("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),Os=[$s];function Ss(t,e,o,a,r,n){return x(),q("svg",Gs,Os)}var Vs=S(Ps,[["render",Ss],["__file","refresh.vue"]]),zs={name:"Search"},Ns={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},js=k("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),Ms=[js];function Us(t,e,o,a,r,n){return x(),q("svg",Ns,Ms)}var Ys=S(zs,[["render",Us],["__file","search.vue"]]);function Ls(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!us(t)}const X=w({name:"FormGenerator",setup(t,{expose:e,attrs:o,slots:a,emit:r}){const n=o,c=u(),A=u(!1),d=isNaN(n.column)?4:n.column>=4?n.column:4,v={submit:()=>{c.value.validate(i=>{i&&r("submit")})},reset:()=>{c.value.resetFields(),r("submit","init")}};function g(i){A.value=i,n.formOption.forEach((f,y)=>{y>d-2&&(f.show=i)})}return n.formOption.length>=d-2&&(n==null?void 0:n.type)==="search"&&g(!1),e(()=>({...c.value,...v})),()=>{function i(){let s={...n};return delete s.model,delete s.formOption,n.formOption.forEach(F=>{var m,_,B;(m=F==null?void 0:F.formItem)!=null&&m.rules&&!((B=(_=F==null?void 0:F.formItem)==null?void 0:_.rules)!=null&&B.hasOwnProperty("trigger"))&&(F.formItem.rules.trigger="blur")}),l(ns,C({class:`FormGenerator ${(n==null?void 0:n.type)==="search"?"FormGeneratorSearch":""} ${(n==null?void 0:n.type)==="dialog"?"FormGeneratorDialog":""}`,inline:(n==null?void 0:n.type)==="search","validate-on-rule-change":!1,"label-width":n.labelWidth||"auto"},s,{ref:c}),{default:()=>[n.formOption.map(F=>{let m;if(!(F.hasOwnProperty("show")&&F.show===!1))return l(L,C(F.formItem,{key:F.formItem.prop}),Ls(m=f(F))?m:{default:()=>[m]})}),s.disabled===!0||s.noFooter||!s.onSubmit?"":l(L,{class:`btnItem ${A.value?"searchItem":""}`},{default:()=>a!=null&&a.default?l(b,null,[a.default()[0].children]):(n==null?void 0:n.type)==="search"?y():l(b,null,[(n==null?void 0:n.type)==="dialog"?l(T,{onClick:F=>{var m,_;function B(I){return I.parentElement.className!=="el-dialog"?B(I.parentElement):I.parentElement}(_=(m=B(F.target).querySelector(".el-dialog__headerbtn"))==null?void 0:m.click)==null||_.call(m)}},{default:()=>[h("取消")]}):"",l(T,{type:"primary",onClick:v.submit},{default:()=>[h("确定")]})]),label:()=>""})]})}function f(s){var F,m,_,B,I,V,z,N,j;switch(s.type){case"input":return l(is,C({clearable:!0,maxlength:30},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(F=s==null?void 0:s.control)==null?void 0:F.slot});case"input-number":return l(As,C({min:0,max:100},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),null);case"select":return l(Cs,C({clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{default:()=>{var p;return[(p=s==null?void 0:s.control)==null?void 0:p.option.map(D=>l(Fs,C(D,{key:D.value}),{...D==null?void 0:D.slot}))]}});case"tree-select":return l(ys,C({clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(m=s==null?void 0:s.control)==null?void 0:m.slot});case"cascader":return l(Ds,C(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(_=s==null?void 0:s.control)==null?void 0:_.slot});case"radio":return l(W,C(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{default:()=>{var p;return[(p=s==null?void 0:s.control)==null?void 0:p.option.map(D=>l(cs,C(D,{label:D.value,key:D.label}),{default:()=>[D.label],...D==null?void 0:D.slot}))]}});case"radio-button":return l(W,C(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{default:()=>{var p;return[(p=s==null?void 0:s.control)==null?void 0:p.option.map(D=>l(rs,C(D,{label:D.value,key:D.label}),{default:()=>[D.label],...D==null?void 0:D.slot}))]}});case"checkbox":return l(H,C(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{default:()=>{var p;return[(p=s==null?void 0:s.control)==null?void 0:p.option.map(D=>l(ts,C(D,{label:D.value,key:D.label}),{default:()=>[D.label],...D==null?void 0:D.slot}))]}});case"checkbox-button":return l(H,C(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{default:()=>{var p;return[(p=s==null?void 0:s.control)==null?void 0:p.option.map(D=>l(es,C(D,{label:D.value,key:D.label}),{default:()=>[D.label],...D==null?void 0:D.slot}))]}});case"datetime":const M={datetimerange:"YYYY-MM-DD hh:mm:ss",daterange:"YYYY-MM-DD",datetime:"YYYY-MM-DD hh:mm:ss",date:"YYYY-MM-DD"}[((B=s==null?void 0:s.control)==null?void 0:B.type)||"date"];return l(ps,C({clearable:!0,format:M,"value-format":M},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(I=s==null?void 0:s.control)==null?void 0:I.slot});case"time":return l(os,C({clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(V=s==null?void 0:s.control)==null?void 0:V.slot});case"switch":return l(ls,C(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(z=s==null?void 0:s.control)==null?void 0:z.slot});case"upload":return l(as,C(s==null?void 0:s.control,{"file-list":n.model[s.formItem.prop],"onUpdate:file-list":p=>n.model[s.formItem.prop]=p}),{default:()=>n.disabled?"":l(T,{type:"primary"},{default:()=>[h("上传文件")]}),...(N=s==null?void 0:s.control)==null?void 0:N.slot});case"txt":return l(b,null,[n.model[s.formItem.prop]]);case"slot":return l(b,null,[(j=a[s.formItem.prop])==null?void 0:j.call(a,{form:n.model,data:n.model[s.formItem.prop]})])}}function y(){return l(b,null,[l(T,{type:"primary",onClick:v.submit,icon:Ys},{default:()=>[h("搜索")]}),l(T,{onClick:v.reset,icon:Vs},{default:()=>[h("重置")]}),n.type==="search"&&n.formOption.length>d-1?l(b,null,[l(T,{text:!0,type:"primary",class:`expandBtn ${A.value?"up":"down"}`,onClick:()=>{g(!A.value)},icon:Rs},{default:()=>[A.value?"收起":"展开"]})]):""])}return i()}}}),Hs=w({__name:"AddDialog",setup(t,{expose:e}){let o=u(),a=u(!1),r=u("新增"),n=u({}),c=u([{type:"input",formItem:{prop:"key1",label:"文本1"}},{type:"select",formItem:{prop:"key2",label:"文本2"},control:{option:[{label:"文本1",value:"值1"},{label:"文本2",value:"值2"}]}}]);const A=_s.getRules(c.value);async function d(i){r.value=i?"修改":"新增",a.value=!0,$(async()=>{var f;(f=o.value())==null||f.resetFields(),r.value})}async function v(){a.value=!1,r.value,ms.success(`${r.value}成功`),g().Table.getTableData()}const g=G("getRefs");return e({openDialog:d}),(i,f)=>{const y=O("el-dialog");return x(),K(y,{title:E(r),modelValue:E(a),"onUpdate:modelValue":f[0]||(f[0]=s=>J(a)?a.value=s:a=s),width:"500px"},{default:R(()=>[l(E(X),{type:"dialog",ref_key:"RefFormGenerator",ref:o,model:E(n),formOption:E(c),rules:E(A),onSubmit:v},null,8,["model","formOption","rules"])]),_:1},8,["title","modelValue"])}}}),Ws=w({__name:"Form",setup(t,{expose:e}){let o=u({}),a=u([{type:"input",formItem:{prop:"key1",label:"字段1"}},{type:"select",formItem:{prop:"key2",label:"字段2"},control:{option:[{label:"文本1",value:"值1"}]}},{type:"input",formItem:{prop:"key3",label:"字段3"}},{type:"input",formItem:{prop:"key4",label:"字段4"}},{type:"input",formItem:{prop:"key5",label:"字段5"}}]);function r(){n().Page.setPageNum(1),n().Table.getTableData()}const n=G("getRefs");return e({form:o}),(c,A)=>(x(),K(E(X),{type:"search",model:E(o),formOption:E(a),onSubmit:r},null,8,["model","formOption"]))}}),Js={class:"Table"},Ks={class:"tool"},Qs=w({__name:"Table",setup(t,{expose:e}){let o=u(!1),a=u([{prop:"key1",label:"文本1"},{prop:"key2",label:"文本2"},{prop:"key3",label:"文本3"},{prop:"key4",label:"文本4"},{prop:"key5",label:"文本5"}]),r=u([]);async function n(){A(),o.value=!0,o.value=!1}function c(d){A().AddDialog.openDialog(d)}ds(()=>{n()});const A=G("getRefs");return e({getTableData:n}),(d,v)=>{const g=O("el-button");return x(),q("div",Js,[k("div",Ks,[l(g,{type:"primary",onClick:v[0]||(v[0]=i=>c())},{default:R(()=>[h("新增")]),_:1})]),l(E(Bs),{data:E(r),loading:E(o),tableOption:E(a)},{operation:R(i=>[l(g,{link:"",type:"primary",onClick:f=>c(i.row.id)},{default:R(()=>[h("编辑")]),_:2},1032,["onClick"]),l(g,{link:"",type:"primary"},{default:R(()=>[h("删除")]),_:1})]),_:1},8,["data","loading","tableOption"])])}}}),Xs={class:"Container"},Zs=w({__name:"index",setup(t){let e=u(),o=u(),a=u(),r=u();return fs("getRefs",()=>({Form:e.value,Table:o.value,Page:a.value,AddDialog:r.value})),(n,c)=>(x(),q("div",Xs,[l(Ws,{ref_key:"RefForm",ref:e,class:"Form"},null,512),l(Qs,{ref_key:"RefTable",ref:o,class:"Table"},null,512),l(Es,{ref_key:"RefPage",ref:a,class:"Page"},null,512),l(Hs,{ref_key:"RefAddDialog",ref:r},null,512)]))}}),sn=k("h1",{id:"模板化模块",tabindex:"-1"},[h("模板化模块 "),k("a",{class:"header-anchor",href:"#模板化模块","aria-hidden":"true"},"#")],-1),nn=k("p",null,"扁平化组件，将父级组件作为通信组件",-1),an={class:"vp-raw"},ln=gs("",14),en=JSON.parse('{"title":"模板化模块","description":"","frontmatter":{},"headers":[{"level":2,"title":"文件结构","slug":"文件结构","link":"#文件结构","children":[]},{"level":2,"title":"index.vue（通信组件）","slug":"index-vue-通信组件","link":"#index-vue-通信组件","children":[]},{"level":2,"title":"Form.vue（搜索表单组件）","slug":"form-vue-搜索表单组件","link":"#form-vue-搜索表单组件","children":[]},{"level":2,"title":"Table.vue（列表组件）","slug":"table-vue-列表组件","link":"#table-vue-列表组件","children":[]},{"level":2,"title":"AddDialog.vue（新增、编辑表单组件）","slug":"adddialog-vue-新增、编辑表单组件","link":"#adddialog-vue-新增、编辑表单组件","children":[]},{"level":2,"title":"Page.vue（分页组件）","slug":"page-vue-分页组件","link":"#page-vue-分页组件","children":[]},{"level":2,"title":"global.scss（公共样式）","slug":"global-scss-公共样式","link":"#global-scss-公共样式","children":[]}],"relativePath":"example/module.md"}'),on={name:"example/module.md"},tn=Object.assign(on,{setup(t){return(e,o)=>(x(),q("div",null,[sn,nn,k("div",an,[l(Zs)]),ln]))}});export{en as __pageData,tn as default};
