import{d as w,r as i,h as O,o as x,e as q,a as l,u as g,i as J,j as P,k as U,F as b,n as $,E as X,l as G,m as Z,p as A,q as Y,s as L,v as T,b as h,x as ss,y as ns,z as as,A as ls,B as os,C as ps,D as H,G as es,H as ts,I as W,J as rs,K as cs,L as Ds,M as ys,N as Fs,O as Cs,P as As,Q as is,f as k,c as K,w as R,R as us,S as ms,T as ds,g as fs}from"./app.20c63513.js";const gs=w({__name:"Page",setup(c,{expose:D}){let p=i(1),a=i(10),r=i(0);function n(y){p.value=y,v().Table.getTableData(null,"page")}function e(y){p.value=1,E(y),v().Table.getTableData(null,"page")}function u(){return a}function d(){return p}function E(y){a.value=y}function f(y){p.value=y}function F(y){r.value=y}const v=P("getRefs");return D({getPageNum:d,getPageSize:u,setPageNum:f,setTotal:F}),(y,s)=>{const C=O("el-pagination");return x(),q("div",null,[l(C,{background:"",onSizeChange:e,onCurrentChange:n,currentPage:g(p),"onUpdate:currentPage":s[0]||(s[0]=m=>J(p)?p.value=m:p=m),layout:"prev, pager, next","page-size":g(a),total:g(r)},null,8,["currentPage","page-size","total"])])}}}),Es=(c,D,p,a)=>{if(!Array.isArray(c))return[];const r=[];let n=[];return a&&(n=Object.keys(a)),c.forEach(e=>{let u={label:typeof e=="string"?e:e[D],value:typeof e=="string"?e:e[p]};a&&n.forEach(d=>{u[d]=e[d]}),r.push(u)}),r},vs=(c,D)=>c.filter(p=>p.formItem.prop===D)[0]||{type:"input",formItem:{prop:"",label:""}},bs=(c,D=[])=>{const p={input:"输入","input-number":"输入",select:"选择","tree-select":"选择",cascader:"选择",radio:"选择","radio-button":"选择",checkbox:"选择","checkbox-button":"选择",datetime:"选择",time:"选择",switch:"选择",upload:"上传"};return c.forEach(a=>{const r={required:!0,message:`请${p[a.type]||"完善"}${a.formItem.label||""}`,trigger:"change"};if(!D.includes(a.formItem.prop)){a.formItem.rules?Array.isArray(a.formItem.rules)?a.formItem.rules.unshift(r):Array.isArray(a.formItem.rules)||(a.formItem.rules=[r,a.formItem.rules]):a.formItem.rules=[r];for(let n=0;n<a.formItem.rules.length;n++){let e=a.formItem.rules[n];e.validator&&typeof e.validator!="function"&&(e.pattern=e.validator,e.message=e.message||"格式有误",delete e.validator)}}}),c},hs=Object.freeze(Object.defineProperty({__proto__:null,getLabel:vs,getOption:Es,setRequired:bs},Symbol.toStringTag,{value:"Module"}));(function(){try{var c=document.createElement("style");c.appendChild(document.createTextNode(".FormGenerator.FormGeneratorSearch{display:flex;justify-content:flex-start;align-items:flex-start;flex-wrap:wrap;flex-direction:row;gap:15px 10px}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item{width:calc(25% - 8px);margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem{margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__label-wrap{display:none}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__content{flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline){padding-bottom:45px}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem{margin:0;height:64px;position:absolute;bottom:0;right:0;width:100%;box-shadow:1px 2px 10px #9ab7ff80;z-index:1;z-index:11;padding:0 16px;box-sizing:border-box}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem .el-form-item__content{display:flex;justify-content:flex-end;align-items:center;flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .el-form-item__content>div{width:100%}.FormGenerator .searchItem{flex-grow:1;flex-shrink:0}.FormGenerator .searchItem .el-form-item__content{justify-content:flex-end}.FormGenerator .expandBtn i{transition:all .3s}.FormGenerator .expandBtn.down i{transform:rotate(180deg)}.FormGenerator .el-select,.FormGenerator .el-input,.FormGenerator .el-cascader,.FormGenerator .el-date-editor.el-input,.FormGenerator .el-date-editor.el-input__wrapper,.TableGenerator .el-scrollbar__view{width:100%}")),document.head.appendChild(c)}catch(D){console.error("vite-plugin-css-injected-by-js",D)}})();const xs=w({name:"TableGenerator",setup(c,{expose:D,attrs:p,slots:a,emit:r}){const n=p;let e,u=new Date().getTime(),d=i(!1),E=i(0);return U(()=>n.loading,f=>{f?$(()=>{e=X.service({target:`.el-table-${u}`})}):e==null||e.close()},{immediate:!0}),U(()=>n.data,f=>{if(!(a!=null&&a.operation)||f.length===0)return d.value=!0;d.value=!1,$(()=>{let F=0;document.querySelectorAll(".content-wrapper-width").forEach(v=>{v.offsetWidth>F&&(F=v.offsetWidth)}),E.value=F>0?F+32:"auto",d.value=!0})},{immediate:!0}),()=>{function f(y){return y.map(s=>["selection","index","expand"].includes(s.type)?l(G,A({type:s.type},s),{...s==null?void 0:s.slot}):l(G,A({"show-overflow-tooltip":!0,align:"left"},s),{default:C=>{var m;return s.children&&Array.isArray(s.children)&&s.children.length>0?f(s.children):a[s.prop]?l(b,null,[(m=a[s.prop])==null?void 0:m.call(a,{$index:C.$index,row:C.row})]):s.formatter?l(b,null,[s.formatter({$index:C.$index,row:C.row})??"-"]):l(b,null,[C.row[s.prop]??"-"])},...s==null?void 0:s.slot}))}function F(){return l(Y,A({stripe:!0},n,{class:`TableGenerator el-table-${u}`}),{default:()=>[f(n.tableOption),a!=null&&a.operation?l(G,{fixed:"right",label:"操作",width:E.value},{default:y=>{var s;return l("div",{class:"content-wrapper"},[(s=a.operation)==null?void 0:s.call(a,{$index:y.$index,row:y.row})])}}):""],empty:()=>a!=null&&a.empty?a==null?void 0:a.empty():l(Z,{description:"暂无数据"},null),append:()=>a!=null&&a.append?a==null?void 0:a.append():""})}function v(){return l(Y,A(p,{class:`TableGenerator el-table-${u}`}),{default:()=>[l(G,{fixed:"right"},{default:y=>{var s;return l("div",{style:"display:inline-block;opacity:0",class:"content-wrapper content-wrapper-width"},[(s=a.operation)==null?void 0:s.call(a,{$index:y.$index,row:y.row})])}})]})}return l(b,null,[d.value?F():v()])}}});/*! Element Plus Icons Vue v2.0.10 */var S=(c,D)=>{let p=c.__vccOpts||c;for(let[a,r]of D)p[a]=r;return p},_s={name:"ArrowUp"},Bs={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ks=k("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),ws=[ks];function qs(c,D,p,a,r,n){return x(),q("svg",Bs,ws)}var Is=S(_s,[["render",qs],["__file","arrow-up.vue"]]),Ts={name:"Refresh"},Rs={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Gs=k("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),Ps=[Gs];function $s(c,D,p,a,r,n){return x(),q("svg",Rs,Ps)}var Os=S(Ts,[["render",$s],["__file","refresh.vue"]]),Ss={name:"Search"},Vs={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},zs=k("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),Ns=[zs];function js(c,D,p,a,r,n){return x(),q("svg",Vs,Ns)}var Ms=S(Ss,[["render",js],["__file","search.vue"]]);function Us(c){return typeof c=="function"||Object.prototype.toString.call(c)==="[object Object]"&&!is(c)}const Q=w({name:"FormGenerator",setup(c,{expose:D,attrs:p,slots:a,emit:r}){const n=p,e=i(),u=i(!1),d=isNaN(n.column)?4:n.column>=4?n.column:4,E={submit:()=>{e.value.validate(F=>{F&&r("submit")})},reset:()=>{e.value.resetFields(),r("submit","init")}};function f(F){u.value=F,n.formOption.forEach((v,y)=>{y>d-2&&(v.show=F)})}return n.formOption.length>=d-2&&(n==null?void 0:n.type)==="search"&&f(!1),D(()=>({...e.value,...E})),()=>{function F(){let s={...n};return delete s.model,delete s.formOption,n.formOption.forEach(C=>{var m,_,B;(m=C==null?void 0:C.formItem)!=null&&m.rules&&!((B=(_=C==null?void 0:C.formItem)==null?void 0:_.rules)!=null&&B.hasOwnProperty("trigger"))&&(C.formItem.rules.trigger="blur")}),l(ss,A({class:`FormGenerator ${(n==null?void 0:n.type)==="search"?"FormGeneratorSearch":""} ${(n==null?void 0:n.type)==="dialog"?"FormGeneratorDialog":""}`,inline:(n==null?void 0:n.type)==="search","validate-on-rule-change":!1,"label-width":n.labelWidth||"auto"},s,{ref:e}),{default:()=>[n.formOption.map(C=>{let m;if(!(C.hasOwnProperty("show")&&C.show===!1))return l(L,A(C.formItem,{key:C.formItem.prop}),Us(m=v(C))?m:{default:()=>[m]})}),s.disabled===!0||s.noFooter||!s.onSubmit?"":l(L,{class:`btnItem ${u.value?"searchItem":""}`},{default:()=>a!=null&&a.default?l(b,null,[a.default()[0].children]):(n==null?void 0:n.type)==="search"?y():l(b,null,[(n==null?void 0:n.type)==="dialog"?l(T,{onClick:C=>{var m,_;function B(I){return I.parentElement.className!=="el-dialog"?B(I.parentElement):I.parentElement}(_=(m=B(C.target).querySelector(".el-dialog__headerbtn"))==null?void 0:m.click)==null||_.call(m)}},{default:()=>[h("取消")]}):"",l(T,{type:"primary",onClick:E.submit},{default:()=>[h("确定")]})]),label:()=>""})]})}function v(s){var C,m,_,B,I,V,z,N,j;switch(s.type){case"input":return l(As,A({clearable:!0,maxlength:30},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(C=s==null?void 0:s.control)==null?void 0:C.slot});case"input-number":return l(Cs,A({min:0,max:100},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),null);case"select":return l(Fs,A({clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o;return[(o=s==null?void 0:s.control)==null?void 0:o.option.map(t=>l(ys,A(t,{key:t.value}),{...t==null?void 0:t.slot}))]}});case"tree-select":return l(Ds,A({clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(m=s==null?void 0:s.control)==null?void 0:m.slot});case"cascader":return l(cs,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(_=s==null?void 0:s.control)==null?void 0:_.slot});case"radio":return l(W,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o;return[(o=s==null?void 0:s.control)==null?void 0:o.option.map(t=>l(rs,A(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slot}))]}});case"radio-button":return l(W,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o;return[(o=s==null?void 0:s.control)==null?void 0:o.option.map(t=>l(ts,A(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slot}))]}});case"checkbox":return l(H,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o;return[(o=s==null?void 0:s.control)==null?void 0:o.option.map(t=>l(es,A(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slot}))]}});case"checkbox-button":return l(H,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o;return[(o=s==null?void 0:s.control)==null?void 0:o.option.map(t=>l(ps,A(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slot}))]}});case"datetime":const M={datetimerange:"YYYY-MM-DD hh:mm:ss",daterange:"YYYY-MM-DD",datetime:"YYYY-MM-DD hh:mm:ss",date:"YYYY-MM-DD"}[((B=s==null?void 0:s.control)==null?void 0:B.type)||"date"];return l(os,A({clearable:!0,format:M,"value-format":M},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(I=s==null?void 0:s.control)==null?void 0:I.slot});case"time":return l(ls,A({clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(V=s==null?void 0:s.control)==null?void 0:V.slot});case"switch":return l(as,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(z=s==null?void 0:s.control)==null?void 0:z.slot});case"upload":return l(ns,A(s==null?void 0:s.control,{"file-list":n.model[s.formItem.prop],"onUpdate:file-list":o=>n.model[s.formItem.prop]=o}),{default:()=>n.disabled?"":l(T,{type:"primary"},{default:()=>[h("上传文件")]}),...(N=s==null?void 0:s.control)==null?void 0:N.slot});case"txt":return l(b,null,[n.model[s.formItem.prop]]);case"slot":return l(b,null,[(j=a[s.formItem.prop])==null?void 0:j.call(a,{form:n.model,data:n.model[s.formItem.prop]})])}}function y(){return l(b,null,[l(T,{type:"primary",onClick:E.submit,icon:Ms},{default:()=>[h("搜索")]}),l(T,{onClick:E.reset,icon:Os},{default:()=>[h("重置")]}),n.type==="search"&&n.formOption.length>d-1?l(b,null,[l(T,{text:!0,type:"primary",class:`expandBtn ${u.value?"up":"down"}`,onClick:()=>{f(!u.value)},icon:Is},{default:()=>[u.value?"收起":"展开"]})]):""])}return F()}}}),Ys=w({__name:"AddDialog",setup(c,{expose:D}){let p=i(),a=i(!1),r=i("新增"),n=i({}),e=i([{type:"input",formItem:{prop:"key1",label:"文本1"}},{type:"select",formItem:{prop:"key2",label:"文本2"},control:{option:[{label:"文本1",value:"值1"},{label:"文本2",value:"值2"}]}}]);hs.setRequired(e.value);async function u(f){r.value=f?"修改":"新增",a.value=!0,$(async()=>{var F;(F=p.value())==null||F.resetFields(),r.value})}async function d(){a.value=!1,r.value,us.success(`${r.value}成功`),E().Table.getTableData()}const E=P("getRefs");return D({openDialog:u}),(f,F)=>{const v=O("el-dialog");return x(),K(v,{title:g(r),modelValue:g(a),"onUpdate:modelValue":F[0]||(F[0]=y=>J(a)?a.value=y:a=y),width:"500px"},{default:R(()=>[l(g(Q),{type:"dialog",ref_key:"RefFormGenerator",ref:p,model:g(n),formOption:g(e),onSubmit:d},null,8,["model","formOption"])]),_:1},8,["title","modelValue"])}}}),Ls=w({__name:"Form",setup(c,{expose:D}){let p=i({}),a=i([{type:"input",formItem:{prop:"key1",label:"字段1"}},{type:"select",formItem:{prop:"key2",label:"字段2"},control:{option:[{label:"文本1",value:"值1"}]}},{type:"input",formItem:{prop:"key3",label:"字段3"}},{type:"input",formItem:{prop:"key4",label:"字段4"}},{type:"input",formItem:{prop:"key5",label:"字段5"}}]);function r(){n().Page.setPageNum(1),n().Table.getTableData()}const n=P("getRefs");return D({form:p}),(e,u)=>(x(),K(g(Q),{type:"search",model:g(p),formOption:g(a),onSubmit:r},null,8,["model","formOption"]))}}),Hs={class:"Table"},Ws={class:"tool"},Js=w({__name:"Table",setup(c,{expose:D}){let p=i(!1),a=i([{prop:"key1",label:"文本1"},{prop:"key2",label:"文本2"},{prop:"key3",label:"文本3"},{prop:"key4",label:"文本4"},{prop:"key5",label:"文本5"}]),r=i([]);async function n(){u(),p.value=!0,p.value=!1}function e(d){u().AddDialog.openDialog(d)}ms(()=>{n()});const u=P("getRefs");return D({getTableData:n}),(d,E)=>{const f=O("el-button");return x(),q("div",Hs,[k("div",Ws,[l(f,{type:"primary",onClick:E[0]||(E[0]=F=>e())},{default:R(()=>[h("新增")]),_:1})]),l(g(xs),{data:g(r),loading:g(p),tableOption:g(a)},{operation:R(F=>[l(f,{link:"",type:"primary",onClick:v=>e(F.row.id)},{default:R(()=>[h("编辑")]),_:2},1032,["onClick"]),l(f,{link:"",type:"primary"},{default:R(()=>[h("删除")]),_:1})]),_:1},8,["data","loading","tableOption"])])}}}),Ks={class:"Container"},Qs=w({__name:"index",setup(c){let D=i(),p=i(),a=i(),r=i();return ds("getRefs",()=>({Form:D.value,Table:p.value,Page:a.value,AddDialog:r.value})),(n,e)=>(x(),q("div",Ks,[l(Ls,{ref_key:"RefForm",ref:D,class:"Form"},null,512),l(Js,{ref_key:"RefTable",ref:p,class:"Table"},null,512),l(gs,{ref_key:"RefPage",ref:a,class:"Page"},null,512),l(Ys,{ref_key:"RefAddDialog",ref:r},null,512)]))}}),Xs=k("h1",{id:"模板化模块",tabindex:"-1"},[h("模板化模块 "),k("a",{class:"header-anchor",href:"#模板化模块","aria-hidden":"true"},"#")],-1),Zs=k("p",null,"扁平化组件，将父级组件作为通信组件",-1),sn={class:"vp-raw"},nn=fs("",14),on=JSON.parse('{"title":"模板化模块","description":"","frontmatter":{},"headers":[{"level":2,"title":"文件结构","slug":"文件结构","link":"#文件结构","children":[]},{"level":2,"title":"index.vue（通信组件）","slug":"index-vue-通信组件","link":"#index-vue-通信组件","children":[]},{"level":2,"title":"Form.vue（搜索表单组件）","slug":"form-vue-搜索表单组件","link":"#form-vue-搜索表单组件","children":[]},{"level":2,"title":"Table.vue（列表组件）","slug":"table-vue-列表组件","link":"#table-vue-列表组件","children":[]},{"level":2,"title":"AddDialog.vue（新增、编辑表单组件）","slug":"adddialog-vue-新增、编辑表单组件","link":"#adddialog-vue-新增、编辑表单组件","children":[]},{"level":2,"title":"Page.vue（分页组件）","slug":"page-vue-分页组件","link":"#page-vue-分页组件","children":[]},{"level":2,"title":"global.scss（公共样式）","slug":"global-scss-公共样式","link":"#global-scss-公共样式","children":[]}],"relativePath":"example/module.md"}'),an={name:"example/module.md"},pn=Object.assign(an,{setup(c){return(D,p)=>(x(),q("div",null,[Xs,Zs,k("div",sn,[l(Qs)]),nn]))}});export{on as __pageData,pn as default};
