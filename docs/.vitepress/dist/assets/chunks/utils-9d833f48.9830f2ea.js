const s=(o,r,i,l)=>{if(!Array.isArray(o))return[];const m=[];let e=[];return l&&(e=Object.keys(l)),o.forEach(t=>{let n={label:typeof t=="string"?t:t[r],value:typeof t=="string"?t:t[i]};l&&e.forEach(u=>{n[u]=t[u]}),m.push(n)}),m},a=(o,r)=>o.filter(i=>i.formItem.prop===r)[0]||{type:"input",formItem:{prop:"",label:""}},f=(o,r,i)=>{var l;const m={input:"输入","input-number":"输入",select:"选择","tree-select":"选择",cascader:"选择",radio:"选择","radio-button":"选择",checkbox:"选择","checkbox-button":"选择",datetime:"选择",time:"选择",switch:"选择",upload:"上传"},e=a(o.formOption,o.field);if(Array.isArray(r)&&r.length===0)return Promise.reject(`请${m[e.type]||"完善"}${e.formItem.label}`);if(!r)return Promise.reject(`请${m[e.type]||"完善"}${e.formItem.label}`);if(!((l=e==null?void 0:e.formItem)!=null&&l.rules))return Promise.resolve();if(typeof e.formItem.rules.validator=="function")e.formItem.rules.validator(o,r).then(()=>i()).catch(t=>{var n;return i(new Error(t!=="err"?t:((n=e==null?void 0:e.formItem.rules)==null?void 0:n.message)??""))});else return e.formItem.rules.validator.test(r)?Promise.resolve():Promise.reject(e.formItem.rules.message)},c=(o,r=[])=>{let i={};return o.forEach(l=>{var m,e;const t=typeof l=="string"?l:l.formItem.prop;r.includes(t)||(i[t]=[{required:!0,validator:f,trigger:((e=(m=l.formItem)==null?void 0:m.rules)==null?void 0:e.trigger)??"blur",formOption:o}])}),i},p={checkIphoneNum:(o,r)=>r?/(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(r)?Promise.resolve():Promise.reject("手机格式有误"):Promise.reject("请输入手机号")},d=Object.freeze(Object.defineProperty({__proto__:null,CommonValidator:p,getLabel:a,getOption:s,getRules:c},Symbol.toStringTag,{value:"Module"}));export{d as p};
