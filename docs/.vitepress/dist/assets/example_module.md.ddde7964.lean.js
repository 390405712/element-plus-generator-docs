import{d as k,r as u,o as h,e as w,a as l,u as v,i as H,j as P,h as G,k as J,l as M,E as Z,F as b,m as R,n as ss,p as A,q as U,s as Y,v as q,b as _,x as ns,y as as,z as ls,A as os,B as ps,C as es,D as L,G as ts,H as rs,I as W,J as cs,K as Ds,L as ys,M as Fs,N as Cs,O as As,P as is,Q as us,f as B,c as K,w as T,R as ms,S as ds,T as fs,g as gs}from"./app.ddc9db07.js";const vs=k({__name:"Page",setup(t,{expose:e}){let o=u(1),a=u(10),r=u(0);function n(y){o.value=y,d().Table.getTableData(null,"page")}function c(y){o.value=1,E(y),d().Table.getTableData(null,"page")}function F(){return a}function m(){return o}function E(y){a.value=y}function g(y){o.value=y}function i(y){r.value=y}const d=P("getRefs");return e({getPageNum:m,getPageSize:F,setPageNum:g,setTotal:i}),(y,s)=>{const C=G("el-pagination");return h(),w("div",null,[l(C,{background:"",onSizeChange:c,onCurrentChange:n,currentPage:v(o),"onUpdate:currentPage":s[0]||(s[0]=f=>H(o)?o.value=f:o=f),layout:"prev, pager, next","page-size":v(a),total:v(r)},null,8,["currentPage","page-size","total"])])}}}),Es=(t,e,o,a)=>{if(!Array.isArray(t))return[];const r=[];let n=[];return a&&(n=Object.keys(a)),t.forEach(c=>{let F={label:typeof c=="string"?c:c[e],value:typeof c=="string"?c:c[o]};a&&n.forEach(m=>{F[m]=c[m]}),r.push(F)}),r},Q=(t,e)=>t.filter(o=>o.formItem.prop===e)[0]||{type:"input",formItem:{prop:"",label:""}},bs=(t,e,o)=>{var a;const r={input:"输入","input-number":"输入",select:"选择","tree-select":"选择",cascader:"选择",radio:"选择","radio-button":"选择",checkbox:"选择","checkbox-button":"选择",datetime:"选择",time:"选择",switch:"选择",upload:"上传"},n=Q(t.formOption,t.field);if(Array.isArray(e)&&e.length===0)return Promise.reject(`请${r[n.type]||"完善"}${n.formItem.label}`);if(!e)return Promise.reject(`请${r[n.type]||"完善"}${n.formItem.label}`);if(!((a=n==null?void 0:n.formItem)!=null&&a.rules))return Promise.resolve();if(typeof n.formItem.rules.validator=="function")n.formItem.rules.validator(t,e).then(()=>o()).catch(c=>{var F;return o(new Error(c!=="err"?c:((F=n==null?void 0:n.formItem.rules)==null?void 0:F.message)??""))});else return n.formItem.rules.validator.test(e)?Promise.resolve():Promise.reject(n.formItem.rules.message)},hs=(t,e=[])=>{let o={};return t.forEach(a=>{var r,n;const c=typeof a=="string"?a:a.formItem.prop;e.includes(c)||(o[c]=[{required:!0,validator:bs,trigger:((n=(r=a.formItem)==null?void 0:r.rules)==null?void 0:n.trigger)??"blur",formOption:t}])}),o},xs={checkIphoneNum:(t,e)=>e?/(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(e)?Promise.resolve():Promise.reject("手机格式有误"):Promise.reject("请输入手机号")},_s=Object.freeze(Object.defineProperty({__proto__:null,CommonValidator:xs,getLabel:Q,getOption:Es,getRules:hs},Symbol.toStringTag,{value:"Module"}));(function(){try{var t=document.createElement("style");t.appendChild(document.createTextNode(".FormGenerator.FormGeneratorSearch{display:flex;justify-content:flex-start;align-items:flex-start;flex-wrap:wrap;flex-direction:row;gap:15px 10px}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item{width:calc(25% - 8px);margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem{margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__label-wrap{display:none}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__content{flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline){padding-bottom:45px}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem{margin:0;height:64px;position:absolute;bottom:0;right:0;width:100%;box-shadow:1px 2px 10px #9ab7ff80;z-index:1;z-index:11;padding:0 16px;box-sizing:border-box}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem .el-form-item__content{display:flex;justify-content:flex-end;align-items:center;flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .el-form-item__content>div{width:100%}.FormGenerator .searchItem{flex-grow:1;flex-shrink:0}.FormGenerator .searchItem .el-form-item__content{justify-content:flex-end}.FormGenerator .el-select,.FormGenerator .el-input,.FormGenerator .el-cascader,.FormGenerator .el-date-editor.el-input,.FormGenerator .el-date-editor.el-input__wrapper,.TableGenerator .el-scrollbar__view{width:100%}")),document.head.appendChild(t)}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Bs=k({name:"TableGenerator",setup(t,{expose:e,attrs:o,slots:a,emit:r}){const n=o;let c,F=new Date().getTime(),m=u(!1),E=u(0);return J(()=>{M(()=>n.loading,g=>{g?c=Z.service({target:`.el-table-${F}`}):c==null||c.close()},{immediate:!0}),M(()=>n.data,g=>{if(!(a!=null&&a.operation)||g.length===0)return m.value=!0;m.value=!1,setTimeout(()=>{let i=0;document.querySelectorAll(".content-wrapper-width").forEach(d=>{d.offsetWidth>i&&(i=d.offsetWidth)}),E.value=i>0?i+32:"auto",console.log(E.value),m.value=!0})},{immediate:!0})}),()=>{function g(y){return y.map(s=>["selection","index","expand"].includes(s.type)?l(R,A({type:s.type},s),{...s==null?void 0:s.slot}):l(R,A({"show-overflow-tooltip":!0,align:"left"},s),{default:C=>{var f;return s.children&&s.children.length>0?g(s.children):a[s.prop]?l(b,null,[(f=a[s.prop])==null?void 0:f.call(a,{$index:C.$index,row:C.row})]):s.formatter?l(b,null,[s.formatter({$index:C.$index,row:C.row})??"-"]):l(b,null,[C.row[s.prop]??"-"])},...s==null?void 0:s.slot}))}function i(){return l(U,A({stripe:!0},n,{class:`TableGenerator el-table-${F}`}),{default:()=>[g(n.tableOption),a!=null&&a.operation?l(R,{fixed:"right",label:"操作",width:E.value},{default:y=>{var s;return l("div",{class:"content-wrapper"},[(s=a.operation)==null?void 0:s.call(a,{$index:y.$index,row:y.row})])}}):""],empty:()=>a!=null&&a.empty?a==null?void 0:a.empty():l(ss,{description:"暂无数据"},null),append:()=>a!=null&&a.append?a==null?void 0:a.append():""})}function d(){return l(U,A(o,{class:`TableGenerator el-table-${F}`}),{default:()=>[l(R,{fixed:"right"},{default:y=>{var s;return l("div",{style:"display:inline-block;opacity:0",class:"content-wrapper content-wrapper-width"},[(s=a.operation)==null?void 0:s.call(a,{$index:y.$index,row:y.row})])}})]})}return l(b,null,[m.value?i():d()])}}});/*! Element Plus Icons Vue v2.0.10 */var $=(t,e)=>{let o=t.__vccOpts||t;for(let[a,r]of e)o[a]=r;return o},ws={name:"ArrowDown"},ks={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},qs=B("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),Is=[qs];function Ts(t,e,o,a,r,n){return h(),w("svg",ks,Is)}var Rs=$(ws,[["render",Ts],["__file","arrow-down.vue"]]),Ps={name:"ArrowUp"},$s={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Gs=B("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),Os=[Gs];function Ss(t,e,o,a,r,n){return h(),w("svg",$s,Os)}var Vs=$(Ps,[["render",Ss],["__file","arrow-up.vue"]]),zs={name:"Refresh"},Ns={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},js=B("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),Ms=[js];function Us(t,e,o,a,r,n){return h(),w("svg",Ns,Ms)}var Ys=$(zs,[["render",Us],["__file","refresh.vue"]]),Ls={name:"Search"},Ws={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Hs=B("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),Js=[Hs];function Ks(t,e,o,a,r,n){return h(),w("svg",Ws,Js)}var Qs=$(Ls,[["render",Ks],["__file","search.vue"]]);function Xs(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!us(t)}const X=k({name:"FormGenerator",setup(t,{expose:e,attrs:o,slots:a,emit:r}){const n=o,c=u(),F=u(!1),m={labelWidth:n.labelWidth||"auto",column:isNaN(n.column)?4:n.column>=4?n.column:4},E={submit:()=>{c.value.validate(i=>{i&&r("submit")})},reset:()=>{c.value.resetFields(),r("submit","init")}};function g(i){F.value=i,n.formOption.forEach((d,y)=>{y>m.column-2&&(d.show=i)})}return n.formOption.length>=m.column-2&&(n==null?void 0:n.type)==="search"&&g(!1),e(()=>({...c.value,...E})),()=>{function i(){let s={...n};return delete s.model,delete s.formOption,n.formOption.forEach(C=>{var f,x,I;(f=C==null?void 0:C.formItem)!=null&&f.rules&&!((I=(x=C==null?void 0:C.formItem)==null?void 0:x.rules)!=null&&I.hasOwnProperty("trigger"))&&(C.formItem.rules.trigger="blur")}),l(ns,A({class:`FormGenerator ${(n==null?void 0:n.type)==="search"?"FormGeneratorSearch":""} ${(n==null?void 0:n.type)==="dialog"?"FormGeneratorDialog":""}`,inline:(n==null?void 0:n.type)==="search","validate-on-rule-change":!1},m,s,{ref:c}),{default:()=>[n.formOption.map(C=>{let f;if(!(C.hasOwnProperty("show")&&C.show===!1))return l(Y,C.formItem,Xs(f=d(C))?f:{default:()=>[f]})}),s.disabled===!0||s.noFooter||!s.onSubmit?"":l(Y,{class:`btnItem ${F.value?"searchItem":""}`},{default:()=>a!=null&&a.default?l(b,null,[a.default()[0].children]):(n==null?void 0:n.type)==="search"?y():l(b,null,[l(q,{onClick:C=>{function f(x){return x.parentElement.className!=="el-dialog"?f(x.parentElement):x.parentElement}f(C.target).querySelector(".el-dialog__headerbtn").click()}},{default:()=>[_("取消")]}),l(q,{type:"primary",onClick:E.submit},{default:()=>[_("确定")]})]),label:()=>""})]})}function d(s){var C,f,x,I,O,S,V,z,N;switch(s.type){case"input":return l(is,A({clearable:!0,maxlength:30},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(C=s==null?void 0:s.control)==null?void 0:C.slot});case"input-number":return l(As,A({min:0,max:100},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),null);case"select":return l(Cs,A({clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{default:()=>{var p;return[(p=s==null?void 0:s.control)==null?void 0:p.option.map(D=>l(Fs,A(D,{key:D.value}),{...D==null?void 0:D.slot}))]}});case"tree-select":return l(ys,A({clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(f=s==null?void 0:s.control)==null?void 0:f.slot});case"cascader":return l(Ds,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(x=s==null?void 0:s.control)==null?void 0:x.slot});case"radio":return l(W,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{default:()=>{var p;return[(p=s==null?void 0:s.control)==null?void 0:p.option.map(D=>l(cs,A(D,{label:D.value,key:D.label}),{default:()=>[D.label],...D==null?void 0:D.slot}))]}});case"radio-button":return l(W,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{default:()=>{var p;return[(p=s==null?void 0:s.control)==null?void 0:p.option.map(D=>l(rs,A(D,{label:D.value,key:D.label}),{default:()=>[D.label],...D==null?void 0:D.slot}))]}});case"checkbox":return l(L,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{default:()=>{var p;return[(p=s==null?void 0:s.control)==null?void 0:p.option.map(D=>l(ts,A(D,{label:D.value,key:D.label}),{default:()=>[D.label],...D==null?void 0:D.slot}))]}});case"checkbox-button":return l(L,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{default:()=>{var p;return[(p=s==null?void 0:s.control)==null?void 0:p.option.map(D=>l(es,A(D,{label:D.value,key:D.label}),{default:()=>[D.label],...D==null?void 0:D.slot}))]}});case"datetime":const j={datetimerange:"YYYY-MM-DD hh:mm:ss",daterange:"YYYY-MM-DD",datetime:"YYYY-MM-DD hh:mm:ss",date:"YYYY-MM-DD"}[((I=s==null?void 0:s.control)==null?void 0:I.type)||"date"];return l(ps,A({clearable:!0,format:j,"value-format":j},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(O=s==null?void 0:s.control)==null?void 0:O.slot});case"time":return l(os,A({clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(S=s==null?void 0:s.control)==null?void 0:S.slot});case"switch":return l(ls,A(s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":p=>n.model[s.formItem.prop]=p}),{...(V=s==null?void 0:s.control)==null?void 0:V.slot});case"upload":return l(as,A(s==null?void 0:s.control,{"file-list":n.model[s.formItem.prop],"onUpdate:file-list":p=>n.model[s.formItem.prop]=p}),{default:()=>n.disabled?"":l(q,{type:"primary"},{default:()=>[_("上传文件")]}),...(z=s==null?void 0:s.control)==null?void 0:z.slot});case"txt":return l(b,null,[n.model[s.formItem.prop]]);case"slot":return l(b,null,[(N=a[s.formItem.prop])==null?void 0:N.call(a,{form:n.model,data:n.model[s.formItem.prop]})])}}function y(){return l(b,null,[l(q,{type:"primary",onClick:E.submit,icon:Qs},{default:()=>[_("搜索")]}),l(q,{onClick:E.reset,icon:Ys},{default:()=>[_("重置")]}),n.type==="search"&&n.formOption.length>m.column-1?l(b,null,[l(q,{text:!0,type:"primary",onClick:()=>{g(!F.value)},icon:F.value?Vs:Rs},{default:()=>[F.value?"收起":"展开"]})]):""])}return i()}}}),Zs=k({__name:"AddDialog",setup(t,{expose:e}){let o=u(),a=u(!1),r=u("新增"),n=u({}),c=u([{type:"input",formItem:{prop:"key1",label:"文本1"}},{type:"select",formItem:{prop:"key2",label:"文本2"},control:{option:[{label:"文本1",value:"值1"},{label:"文本2",value:"值2"}]}}]);const F=_s.getRules(c.value);async function m(i){r.value=i?"修改":"新增",a.value=!0,ms(async()=>{var d;(d=o.value())==null||d.resetFields(),r.value})}async function E(){a.value=!1,r.value,ds.success(`${r.value}成功`),g().Table.getTableData()}const g=P("getRefs");return e({openDialog:m}),(i,d)=>{const y=G("el-dialog");return h(),K(y,{title:v(r),modelValue:v(a),"onUpdate:modelValue":d[0]||(d[0]=s=>H(a)?a.value=s:a=s),width:"500px"},{default:T(()=>[l(v(X),{type:"dialog",ref_key:"RefFormGenerator",ref:o,model:v(n),formOption:v(c),rules:v(F),onSubmit:E},null,8,["model","formOption","rules"])]),_:1},8,["title","modelValue"])}}}),sn=k({__name:"Form",setup(t,{expose:e}){let o=u({}),a=u([{type:"input",formItem:{prop:"key1",label:"字段1"}},{type:"select",formItem:{prop:"key2",label:"字段2"},control:{option:[{label:"文本1",value:"值1"}]}},{type:"input",formItem:{prop:"key3",label:"字段3"}},{type:"input",formItem:{prop:"key4",label:"字段4"}},{type:"input",formItem:{prop:"key5",label:"字段5"}}]);function r(){n().Page.setPageNum(1),n().Table.getTableData()}const n=P("getRefs");return e({form:o}),(c,F)=>(h(),K(v(X),{type:"search",model:v(o),formOption:v(a),onSubmit:r},null,8,["model","formOption"]))}}),nn={class:"Table"},an={class:"tool"},ln=k({__name:"Table",setup(t,{expose:e}){let o=u(!1),a=u([{prop:"key1",label:"文本1"},{prop:"key2",label:"文本2"},{prop:"key3",label:"文本3"},{prop:"key4",label:"文本4"},{prop:"key5",label:"文本5"}]),r=u([]);async function n(){F(),o.value=!0,o.value=!1}function c(m){F().AddDialog.openDialog(m)}J(()=>{n()});const F=P("getRefs");return e({getTableData:n}),(m,E)=>{const g=G("el-button");return h(),w("div",nn,[B("div",an,[l(g,{type:"primary",onClick:E[0]||(E[0]=i=>c())},{default:T(()=>[_("新增")]),_:1})]),l(v(Bs),{data:v(r),loading:v(o),tableOption:v(a)},{operation:T(i=>[l(g,{link:"",type:"primary",onClick:d=>c(i.row.id)},{default:T(()=>[_("编辑")]),_:2},1032,["onClick"]),l(g,{link:"",type:"primary"},{default:T(()=>[_("删除")]),_:1})]),_:1},8,["data","loading","tableOption"])])}}}),on={class:"Container"},pn=k({__name:"index",setup(t){let e=u(),o=u(),a=u(),r=u();return fs("getRefs",()=>({Form:e.value,Table:o.value,Page:a.value,AddDialog:r.value})),(n,c)=>(h(),w("div",on,[l(sn,{ref_key:"RefForm",ref:e,class:"Form"},null,512),l(ln,{ref_key:"RefTable",ref:o,class:"Table"},null,512),l(vs,{ref_key:"RefPage",ref:a,class:"Page"},null,512),l(Zs,{ref_key:"RefAddDialog",ref:r},null,512)]))}}),en=B("h1",{id:"模板化模块",tabindex:"-1"},[_("模板化模块 "),B("a",{class:"header-anchor",href:"#模板化模块","aria-hidden":"true"},"#")],-1),tn=B("p",null,"扁平化组件，将父级组件作为通信组件",-1),rn={class:"vp-raw"},cn=gs("",14),Fn=JSON.parse('{"title":"模板化模块","description":"","frontmatter":{},"headers":[{"level":2,"title":"文件结构","slug":"文件结构","link":"#文件结构","children":[]},{"level":2,"title":"index.vue（通信组件）","slug":"index-vue-通信组件","link":"#index-vue-通信组件","children":[]},{"level":2,"title":"Form.vue（搜索表单组件）","slug":"form-vue-搜索表单组件","link":"#form-vue-搜索表单组件","children":[]},{"level":2,"title":"Table.vue（列表组件）","slug":"table-vue-列表组件","link":"#table-vue-列表组件","children":[]},{"level":2,"title":"AddDialog.vue（新增、编辑表单组件）","slug":"adddialog-vue-新增、编辑表单组件","link":"#adddialog-vue-新增、编辑表单组件","children":[]},{"level":2,"title":"Page.vue（分页组件）","slug":"page-vue-分页组件","link":"#page-vue-分页组件","children":[]},{"level":2,"title":"global.scss（公共样式）","slug":"global-scss-公共样式","link":"#global-scss-公共样式","children":[]}],"relativePath":"example/module.md"}'),Dn={name:"example/module.md"},Cn=Object.assign(Dn,{setup(t){return(e,o)=>(h(),w("div",null,[en,tn,B("div",rn,[l(pn)]),cn]))}});export{Fn as __pageData,Cn as default};
