import{f as q,r as A,h as B,i as w,E as l,u as E,a9 as ns,R as P,G as O,e as K,n as S,F as h,D as F,l as x,aa as os,z as k,A as as,B as R,o as ps,S as es,O as ts}from"./chunks/framework.da0a5549.js";import{E as rs,a as $,b as cs,c as Q,d as X,e as T,f as Ds,g as ys,h as Fs,i as Cs,j as As,k as is,l as Z,m as us,n as ms,o as ss,p as ds,q as fs,r as gs,s as Es,t as bs,u as vs,v as hs,w as xs}from"./chunks/index.022bf6ee.js";import"./chunks/theme.1bb407bd.js";import"./chunks/commonjsHelpers.28e086c5.js";const Bs=q({__name:"Page",setup(D,{expose:y}){let p=A(1),a=A(10),r=A(0);function n(i){p.value=i,m().Table.getTableData(null,"page")}function c(i){p.value=1,f(i),m().Table.getTableData(null,"page")}function e(){return a}function C(){return p}function f(i){a.value=i}function g(i){p.value=i}function u(i){r.value=i}const m=P("getRefs");return y({getPageNum:C,getPageSize:e,setPageNum:g,setTotal:u}),(i,b)=>{const s=O("el-pagination");return B(),w("div",null,[l(s,{background:"",onSizeChange:c,onCurrentChange:n,currentPage:E(p),"onUpdate:currentPage":b[0]||(b[0]=d=>ns(p)?p.value=d:p=d),layout:"prev, pager, next","page-size":E(a),total:E(r)},null,8,["currentPage","page-size","total"])])}}});(function(){try{var D=document.createElement("style");D.appendChild(document.createTextNode(".FormGenerator.FormGeneratorSearch{display:flex;justify-content:flex-start;align-items:flex-start;flex-wrap:wrap;flex-direction:row;gap:15px 10px}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item{width:calc(25% - 8px);margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem{margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__label-wrap{display:none}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__content{flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline){padding-bottom:45px}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem{margin:0;height:64px;position:absolute;bottom:0;right:0;width:100%;box-shadow:1px 2px 10px #9ab7ff80;z-index:1;z-index:11;padding:0 16px;box-sizing:border-box}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem .el-form-item__content{display:flex;justify-content:flex-end;align-items:center;flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .el-form-item__content>div{width:100%}.FormGenerator .searchItem{flex-grow:1;flex-shrink:0}.FormGenerator .searchItem .el-form-item__content{justify-content:flex-end}.FormGenerator .expandBtn i{transition:all .3s}.FormGenerator .expandBtn.down i{transform:rotate(180deg)}.FormGenerator .el-select,.FormGenerator .el-input,.FormGenerator .el-cascader,.FormGenerator .el-date-editor.el-input,.FormGenerator .el-date-editor.el-input__wrapper,.TableGenerator .el-scrollbar__view{width:100%}.StepsGenerator{width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-start;gap:10px}.StepsGenerator .btn-group{width:100%;display:flex;justify-content:center;gap:10px}")),document.head.appendChild(D)}catch(y){console.error("vite-plugin-css-injected-by-js",y)}})();const _s=q({name:"TableGenerator",setup(D,{expose:y,attrs:p,slots:a,emit:r}){const n=A(),c=p;let e,C=new Date().getTime(),f=A(!1),g=A(0);return K(()=>c.loading,u=>{u?S(()=>{e=rs.service({target:`.el-table-${C}`})}):e==null||e.close()},{immediate:!0}),K(()=>c.data,u=>{if(!(a!=null&&a.operation)||u.length===0)return f.value=!0;f.value=!1,S(()=>{let m=0;document.querySelectorAll(".content-wrapper-width").forEach(i=>{i.offsetWidth>m&&(m=i.offsetWidth)}),g.value=m>0?m+32:"auto",f.value=!0})},{immediate:!0}),y(()=>n.value),()=>{function u(b){return b.map(s=>["selection","index","expand"].includes(s.type)?l($,F({type:s.type},s),{...s==null?void 0:s.slots}):l($,F({"show-overflow-tooltip":!0,align:"left"},s),{default:d=>{var _;return s.children&&Array.isArray(s.children)&&s.children.length>0?u(s.children):a[s.prop]?l(h,null,[(_=a[s.prop])==null?void 0:_.call(a,{$index:d.$index,row:d.row})]):s.formatter?l(h,null,[s.formatter({$index:d.$index,row:d.row})??"-"]):l(h,null,[d.row[s.prop]??"-"])},...s==null?void 0:s.slots}))}function m(){return l(Q,F({ref:n,stripe:!0},c,{class:`TableGenerator el-table-${C}`}),{default:()=>[u(c.tableOption),a!=null&&a.operation?l($,{fixed:"right",label:"操作",width:g.value},{default:b=>{var s;return l("div",{class:"content-wrapper"},[(s=a.operation)==null?void 0:s.call(a,{$index:b.$index,row:b.row})])}}):""],empty:()=>a!=null&&a.empty?a==null?void 0:a.empty():l(cs,{description:"暂无数据"},null),append:()=>a!=null&&a.append?a==null?void 0:a.append():""})}function i(){return l(Q,F(p,{class:`TableGenerator el-table-${C}`}),{default:()=>[l($,{fixed:"right"},{default:b=>{var s;return l("div",{style:"display:inline-block;opacity:0",class:"content-wrapper content-wrapper-width"},[(s=a.operation)==null?void 0:s.call(a,{$index:b.$index,row:b.row})])}})]})}return l(h,null,[f.value?m():i()])}}});/*! Element Plus Icons Vue v2.1.0 */var V=(D,y)=>{let p=D.__vccOpts||D;for(let[a,r]of y)p[a]=r;return p},ks={name:"ArrowUp"},qs={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ws=k("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),Is=[ws];function Ts(D,y,p,a,r,n){return B(),w("svg",qs,Is)}var Gs=V(ks,[["render",Ts],["__file","arrow-up.vue"]]),Rs={name:"Refresh"},$s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Ps=k("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),Ss=[Ps];function Os(D,y,p,a,r,n){return B(),w("svg",$s,Ss)}var Vs=V(Rs,[["render",Os],["__file","refresh.vue"]]),zs={name:"Search"},Ns={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},js=k("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),Ms=[js];function Us(D,y,p,a,r,n){return B(),w("svg",Ns,Ms)}var Ys=V(zs,[["render",Us],["__file","search.vue"]]);function Ls(D){return typeof D=="function"||Object.prototype.toString.call(D)==="[object Object]"&&!os(D)}const ls=q({name:"FormGenerator",setup(D,{expose:y,attrs:p,slots:a,emit:r}){const n=p,c=A(),e={},C=A(!1),f=isNaN(n.column)?4:n.column>=4?n.column:4,g={submit:()=>{c.value.validate(m=>{m&&r("submit")})},reset:()=>{c.value.resetFields(),r("submit","init")}};function u(m){C.value=m,n.formOption.forEach((i,b)=>{b>f-2&&(i.show=m)})}return n.formOption.length>=f-2&&(n==null?void 0:n.type)==="search"&&u(!1),y(()=>({...c.value,...g,$refs:e})),()=>{function m(){return l(Ds,F({class:`FormGenerator ${(n==null?void 0:n.type)==="search"?"FormGeneratorSearch":""} ${(n==null?void 0:n.type)==="dialog"?"FormGeneratorDialog":""}`,inline:(n==null?void 0:n.type)==="search","validate-on-rule-change":!1,"label-width":n.labelWidth||"auto"},n,{ref:c}),{default:()=>[n.formOption.map(s=>{let d;return l(X,F(s.formItem,{style:s.hasOwnProperty("show")&&s.show===!1?"display:none":"",key:s.formItem.prop}),Ls(d=i(s))?d:{default:()=>[d]})}),n.disabled===!0||n.noFooter||!n.onSubmit?"":l(X,{class:`btnItem ${C.value?"searchItem":""}`},{default:()=>a!=null&&a.default&&typeof(a==null?void 0:a.default()[0].type)=="string"?l(h,null,[a.default()[0].children]):(n==null?void 0:n.type)==="search"?b():l(h,null,[(n==null?void 0:n.type)==="dialog"?l(T,{onClick:s=>{var d,_;function G(I){return I.parentElement.classList.value.split(" ").includes("el-dialog")?I.parentElement:G(I.parentElement)}(_=(d=G(s.target).querySelector(".el-dialog__headerbtn"))==null?void 0:d.click)==null||_.call(d)}},{default:()=>[x("取消")]}):"",l(T,{type:"primary",onClick:g.submit},{default:()=>[x("确定")]})]),label:()=>""})]})}function i(s){var d,_,G,I,z,N,j,M,U,Y,L,W,H;switch(e[s.formItem.prop]=A(),s.type){case"input":return l(hs,F({ref:e[s.formItem.prop],clearable:!0,maxlength:30},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(d=s==null?void 0:s.control)==null?void 0:d.slots});case"input-number":return l(vs,F({ref:e[s.formItem.prop],min:0,max:100},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),null);case"select":return l(bs,F({ref:e[s.formItem.prop],clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o,v;return[((o=s==null?void 0:s.control)==null?void 0:o.option)instanceof Array?(v=s==null?void 0:s.control)==null?void 0:v.option.map(t=>l(Es,F(t,{key:t.value}),{...t==null?void 0:t.slots})):""]}});case"tree-select":return l(gs,F({ref:e[s.formItem.prop],clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(_=s==null?void 0:s.control)==null?void 0:_.slots});case"cascader":return l(fs,F({ref:e[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(G=s==null?void 0:s.control)==null?void 0:G.slots});case"radio":return l(ss,F({ref:e[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o,v;return[((o=s==null?void 0:s.control)==null?void 0:o.radioGroup)instanceof Array?(v=s==null?void 0:s.control)==null?void 0:v.radioGroup.map(t=>l(ds,F(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slots})):""]}});case"radio-button":return l(ss,F({ref:e[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o,v;return[((o=s==null?void 0:s.control)==null?void 0:o.radioGroup)instanceof Array?(v=s==null?void 0:s.control)==null?void 0:v.radioGroup.map(t=>l(ms,F(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slots})):""]}});case"checkbox":return l(Z,F({ref:e[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o,v;return[((o=s==null?void 0:s.control)==null?void 0:o.checkboxGroup)instanceof Array?(v=s==null?void 0:s.control)==null?void 0:v.checkboxGroup.map(t=>l(us,F(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slots})):""]}});case"checkbox-button":return l(Z,F({ref:e[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o,v;return[((o=s==null?void 0:s.control)==null?void 0:o.checkboxGroup)instanceof Array?(v=s==null?void 0:s.control)==null?void 0:v.checkboxGroup.map(t=>l(is,F(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slots})):""]}});case"date-picker":case"date-time-picker":const J={datetimerange:"YYYY-MM-DD hh:mm:ss",daterange:"YYYY-MM-DD",datetime:"YYYY-MM-DD hh:mm:ss",date:"YYYY-MM-DD"}[((I=s==null?void 0:s.control)==null?void 0:I.type)||"date"];return l(As,F({ref:e[s.formItem.prop],clearable:!0,format:J,"value-format":J},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(z=s==null?void 0:s.control)==null?void 0:z.slots});case"time-picker":return l(Cs,F({ref:e[s.formItem.prop],clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),null);case"switch":return l(Fs,F({ref:e[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),null);case"upload":return l(ys,F({ref:e[s.formItem.prop]},s==null?void 0:s.control,{"file-list":n.model[s.formItem.prop],"onUpdate:file-list":o=>n.model[s.formItem.prop]=o}),{default:()=>n.disabled?"":l(T,{type:"primary"},{default:()=>[x("上传文件")]}),...(N=s==null?void 0:s.control)==null?void 0:N.slots});case"slot":return(M=(j=s==null?void 0:s.control)==null?void 0:j.slots)!=null&&M.default&&typeof((Y=(U=s==null?void 0:s.control)==null?void 0:U.slots)==null?void 0:Y.default)=="function"?l(h,null,[(W=(L=s.control.slots).default)==null?void 0:W.call(L,{form:n.model,data:n.model[s.formItem.prop]})]):a[s.formItem.prop]?(H=a[s.formItem.prop])==null?void 0:H.call(a,{form:n.model,data:n.model[s.formItem.prop]}):n.model[s.formItem.prop]}}function b(){return l(h,null,[l(T,{type:"primary",onClick:g.submit,icon:Ys},{default:()=>[x("搜索")]}),l(T,{onClick:g.reset,icon:Vs},{default:()=>[x("重置")]}),n.type==="search"&&n.formOption.length>f-1?l(h,null,[l(T,{text:!0,type:"primary",class:`expandBtn ${C.value?"up":"down"}`,onClick:()=>{u(!C.value)},icon:Gs},{default:()=>[C.value?"收起":"展开"]})]):""])}return m()}}}),Ws=(D,y,p,a)=>{if(!Array.isArray(D))return[];const r=[];let n=[];return a&&(n=Object.keys(a)),D.forEach(c=>{let e={label:typeof c=="string"?c:c[y],value:typeof c=="string"?c:c[p]};a&&n.forEach(C=>{e[C]=c[C]}),r.push(e)}),r},Hs=(D,y=[])=>{const p={input:"输入","input-number":"输入",select:"选择","tree-select":"选择",cascader:"选择",radio:"选择","radio-button":"选择",checkbox:"选择","checkbox-button":"选择","date-picker":"选择","date-time-picker":"选择","time-picker":"选择",switch:"选择",upload:"上传",slot:"完善"};return D.forEach(a=>{var r,n,c;const e={required:!0,message:`请${p[a.type]??"完善"}${a.formItem.label??""}`,trigger:"change"};if(!y.includes(a.formItem.prop)&&(((r=a.formItem)==null?void 0:r.rules)instanceof Object?a.formItem.rules=[e,a.formItem.rules]:Array.isArray((n=a.formItem)==null?void 0:n.rules)?a.formItem.rules.unshift(e):a.formItem.rules=[e],((c=a.formItem)==null?void 0:c.rules)instanceof Array))for(let C=0;C<a.formItem.rules.length;C++){let f=a.formItem.rules[C];f.message||(f.message="格式有误")}}),D},Js=Object.freeze(Object.defineProperty({__proto__:null,getOption:Ws,setRequired:Hs},Symbol.toStringTag,{value:"Module"})),Ks=q({__name:"AddDialog",setup(D,{expose:y}){let p=A(),a=A(!1),r=A("新增"),n=A({}),c=A([{type:"input",formItem:{prop:"key1",label:"文本1"}},{type:"select",formItem:{prop:"key2",label:"文本2"},control:{option:[{label:"文本1",value:"值1"},{label:"文本2",value:"值2"}]}}]);Js.setRequired(c.value);async function e(g){r.value=g?"修改":"新增",a.value=!0,S(async()=>{var u;(u=p.value())==null||u.resetFields(),r.value})}async function C(){a.value=!1,r.value,xs.success(`${r.value}成功`),f().Table.getTableData()}const f=P("getRefs");return y({openDialog:e}),(g,u)=>{const m=O("el-dialog");return B(),as(m,{title:E(r),modelValue:E(a),"onUpdate:modelValue":u[0]||(u[0]=i=>ns(a)?a.value=i:a=i),width:"500px"},{default:R(()=>[l(E(ls),{type:"dialog",ref_key:"RefFormGenerator",ref:p,model:E(n),formOption:E(c),onSubmit:C},null,8,["model","formOption"])]),_:1},8,["title","modelValue"])}}}),Qs=q({__name:"Form",setup(D,{expose:y}){let p=A({}),a=A([{type:"input",formItem:{prop:"key1",label:"字段1"}},{type:"select",formItem:{prop:"key2",label:"字段2"},control:{option:[{label:"文本1",value:"值1"}]}},{type:"input",formItem:{prop:"key3",label:"字段3"}},{type:"input",formItem:{prop:"key4",label:"字段4"}},{type:"input",formItem:{prop:"key5",label:"字段5"}}]);function r(){n().Page.setPageNum(1),n().Table.getTableData()}const n=P("getRefs");return y({form:p}),(c,e)=>(B(),as(E(ls),{type:"search",model:E(p),formOption:E(a),onSubmit:r},null,8,["model","formOption"]))}}),Xs={class:"Table"},Zs={class:"tool"},sn=q({__name:"Table",setup(D,{expose:y}){let p=A(!1),a=A([{prop:"key1",label:"文本1"},{prop:"key2",label:"文本2"},{prop:"key3",label:"文本3"},{prop:"key4",label:"文本4"},{prop:"key5",label:"文本5"}]),r=A([]);async function n(){e(),p.value=!0,p.value=!1}function c(C){e().AddDialog.openDialog(C)}ps(()=>{n()});const e=P("getRefs");return y({getTableData:n}),(C,f)=>{const g=O("el-button");return B(),w("div",Xs,[k("div",Zs,[l(g,{type:"primary",onClick:f[0]||(f[0]=u=>c())},{default:R(()=>[x("新增")]),_:1})]),l(E(_s),{data:E(r),loading:E(p),tableOption:E(a)},{operation:R(u=>[l(g,{link:"",type:"primary",onClick:m=>c(u.row.id)},{default:R(()=>[x("编辑")]),_:2},1032,["onClick"]),l(g,{link:"",type:"primary"},{default:R(()=>[x("删除")]),_:1})]),_:1},8,["data","loading","tableOption"])])}}}),nn={class:"Container"},an=q({__name:"index",setup(D){let y=A(),p=A(),a=A(),r=A();return es("getRefs",()=>({Form:y.value,Table:p.value,Page:a.value,AddDialog:r.value})),(n,c)=>(B(),w("div",nn,[l(Qs,{ref_key:"RefForm",ref:y,class:"Form"},null,512),l(sn,{ref_key:"RefTable",ref:p,class:"Table"},null,512),l(Bs,{ref_key:"RefPage",ref:a,class:"Page"},null,512),l(Ks,{ref_key:"RefAddDialog",ref:r},null,512)]))}}),ln=k("h1",{id:"模板化模块",tabindex:"-1"},[x("模板化模块 "),k("a",{class:"header-anchor",href:"#模板化模块","aria-label":'Permalink to "模板化模块"'},"​")],-1),on=k("p",null,"扁平化组件，将父级组件作为通信组件",-1),pn={class:"vp-raw"},en=ts("",14),Fn=JSON.parse('{"title":"模板化模块","description":"","frontmatter":{},"headers":[],"relativePath":"example/module.md"}'),tn={name:"example/module.md"},Cn=Object.assign(tn,{setup(D){return(y,p)=>(B(),w("div",null,[ln,on,k("div",pn,[l(an)]),en]))}});export{Fn as __pageData,Cn as default};
