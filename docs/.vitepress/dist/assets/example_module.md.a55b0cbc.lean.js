import{d as k,r as i,h as S,o as _,e as w,a as l,u as E,i as K,j as P,k as Y,F as h,n as O,E as Z,l as $,m as ss,p as A,q as L,s as H,v as I,b as x,x as ns,y as as,z as ls,A as os,B as ps,C as es,D as W,G as ts,H as rs,I as J,J as cs,K as Ds,L as ys,M as Fs,N as Cs,O as As,P as is,Q as us,f as B,c as Q,w as G,R as ms,S as ds,T as fs,g as gs}from"./app.99393eb8.js";const Es=k({__name:"Page",setup(y,{expose:F}){let p=i(1),a=i(10),r=i(0);function n(C){p.value=C,f().Table.getTableData(null,"page")}function e(C){p.value=1,v(C),f().Table.getTableData(null,"page")}function c(){return a}function u(){return p}function v(C){a.value=C}function m(C){p.value=C}function d(C){r.value=C}const f=P("getRefs");return F({getPageNum:u,getPageSize:c,setPageNum:m,setTotal:d}),(C,D)=>{const s=S("el-pagination");return _(),w("div",null,[l(s,{background:"",onSizeChange:e,onCurrentChange:n,currentPage:E(p),"onUpdate:currentPage":D[0]||(D[0]=g=>K(p)?p.value=g:p=g),layout:"prev, pager, next","page-size":E(a),total:E(r)},null,8,["currentPage","page-size","total"])])}}}),vs=(y,F,p,a)=>{if(!Array.isArray(y))return[];const r=[];let n=[];return a&&(n=Object.keys(a)),y.forEach(e=>{let c={label:typeof e=="string"?e:e[F],value:typeof e=="string"?e:e[p]};a&&n.forEach(u=>{c[u]=e[u]}),r.push(c)}),r},bs=(y,F)=>y.filter(p=>p.formItem.prop===F)[0]||{type:"input",formItem:{prop:"",label:""}},hs=(y,F=[])=>{const p={input:"输入","input-number":"输入",select:"选择","tree-select":"选择",cascader:"选择",radio:"选择","radio-button":"选择",checkbox:"选择","checkbox-button":"选择",datetime:"选择",time:"选择",switch:"选择",upload:"上传"};return y.forEach(a=>{const r={required:!0,message:`请${p[a.type]||"完善"}${a.formItem.label||""}`,trigger:"change"};if(!F.includes(a.formItem.prop)){a.formItem.rules?Array.isArray(a.formItem.rules)?a.formItem.rules.unshift(r):Array.isArray(a.formItem.rules)||(a.formItem.rules=[r,a.formItem.rules]):a.formItem.rules=[r];for(let n=0;n<a.formItem.rules.length;n++){let e=a.formItem.rules[n];e.validator&&typeof e.validator!="function"&&(e.pattern=e.validator,e.message=e.message||"格式有误",delete e.validator)}}}),y},xs=Object.freeze(Object.defineProperty({__proto__:null,getLabel:bs,getOption:vs,setRequired:hs},Symbol.toStringTag,{value:"Module"}));(function(){try{var y=document.createElement("style");y.appendChild(document.createTextNode(".FormGenerator.FormGeneratorSearch{display:flex;justify-content:flex-start;align-items:flex-start;flex-wrap:wrap;flex-direction:row;gap:15px 10px}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item{width:calc(25% - 8px);margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem{margin:0}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__label-wrap{display:none}.FormGenerator.FormGeneratorSearch.el-form--inline .el-form-item.btnItem .el-form-item__content{flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline){padding-bottom:45px}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem{margin:0;height:64px;position:absolute;bottom:0;right:0;width:100%;box-shadow:1px 2px 10px #9ab7ff80;z-index:1;z-index:11;padding:0 16px;box-sizing:border-box}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .btnItem .el-form-item__content{display:flex;justify-content:flex-end;align-items:center;flex-wrap:nowrap}.FormGenerator.FormGeneratorDialog.el-form--default:not(.el-form--inline) .el-form-item__content>div{width:100%}.FormGenerator .searchItem{flex-grow:1;flex-shrink:0}.FormGenerator .searchItem .el-form-item__content{justify-content:flex-end}.FormGenerator .expandBtn i{transition:all .3s}.FormGenerator .expandBtn.down i{transform:rotate(180deg)}.FormGenerator .el-select,.FormGenerator .el-input,.FormGenerator .el-cascader,.FormGenerator .el-date-editor.el-input,.FormGenerator .el-date-editor.el-input__wrapper,.TableGenerator .el-scrollbar__view{width:100%}")),document.head.appendChild(y)}catch(F){console.error("vite-plugin-css-injected-by-js",F)}})();const _s=k({name:"TableGenerator",setup(y,{expose:F,attrs:p,slots:a,emit:r}){const n=p;let e,c=new Date().getTime(),u=i(!1),v=i(0);return Y(()=>n.loading,m=>{m?O(()=>{e=Z.service({target:`.el-table-${c}`})}):e==null||e.close()},{immediate:!0}),Y(()=>n.data,m=>{if(!(a!=null&&a.operation)||m.length===0)return u.value=!0;u.value=!1,O(()=>{let d=0;document.querySelectorAll(".content-wrapper-width").forEach(f=>{f.offsetWidth>d&&(d=f.offsetWidth)}),v.value=d>0?d+32:"auto",u.value=!0})},{immediate:!0}),()=>{function m(C){return C.map(D=>["selection","index","expand"].includes(D.type)?l($,A({type:D.type},D),{...D==null?void 0:D.slot}):l($,A({"show-overflow-tooltip":!0,align:"left"},D),{default:s=>{var g;return D.children&&Array.isArray(D.children)&&D.children.length>0?m(D.children):a[D.prop]?l(h,null,[(g=a[D.prop])==null?void 0:g.call(a,{$index:s.$index,row:s.row})]):D.formatter?l(h,null,[D.formatter({$index:s.$index,row:s.row})??"-"]):l(h,null,[s.row[D.prop]??"-"])},...D==null?void 0:D.slot}))}function d(){return l(L,A({stripe:!0},n,{class:`TableGenerator el-table-${c}`}),{default:()=>[m(n.tableOption),a!=null&&a.operation?l($,{fixed:"right",label:"操作",width:v.value},{default:C=>{var D;return l("div",{class:"content-wrapper"},[(D=a.operation)==null?void 0:D.call(a,{$index:C.$index,row:C.row})])}}):""],empty:()=>a!=null&&a.empty?a==null?void 0:a.empty():l(ss,{description:"暂无数据"},null),append:()=>a!=null&&a.append?a==null?void 0:a.append():""})}function f(){return l(L,A(p,{class:`TableGenerator el-table-${c}`}),{default:()=>[l($,{fixed:"right"},{default:C=>{var D;return l("div",{style:"display:inline-block;opacity:0",class:"content-wrapper content-wrapper-width"},[(D=a.operation)==null?void 0:D.call(a,{$index:C.$index,row:C.row})])}})]})}return l(h,null,[u.value?d():f()])}}});/*! Element Plus Icons Vue v2.0.10 */var V=(y,F)=>{let p=y.__vccOpts||y;for(let[a,r]of F)p[a]=r;return p},Bs={name:"ArrowUp"},ks={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ws=B("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),qs=[ws];function Is(y,F,p,a,r,n){return _(),w("svg",ks,qs)}var Ts=V(Bs,[["render",Is],["__file","arrow-up.vue"]]),Rs={name:"Refresh"},Gs={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},$s=B("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),Ps=[$s];function Os(y,F,p,a,r,n){return _(),w("svg",Gs,Ps)}var Ss=V(Rs,[["render",Os],["__file","refresh.vue"]]),Vs={name:"Search"},zs={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ns=B("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),Ms=[Ns];function js(y,F,p,a,r,n){return _(),w("svg",zs,Ms)}var Us=V(Vs,[["render",js],["__file","search.vue"]]);function Ys(y){return typeof y=="function"||Object.prototype.toString.call(y)==="[object Object]"&&!us(y)}const X=k({name:"FormGenerator",setup(y,{expose:F,attrs:p,slots:a,emit:r}){const n=p,e=i(),c={},u=i(!1),v=isNaN(n.column)?4:n.column>=4?n.column:4,m={submit:()=>{e.value.validate(f=>{f&&r("submit")})},reset:()=>{e.value.resetFields(),r("submit","init")}};function d(f){u.value=f,n.formOption.forEach((C,D)=>{D>v-2&&(C.show=f)})}return n.formOption.length>=v-2&&(n==null?void 0:n.type)==="search"&&d(!1),F(()=>({...e.value,...m,$refs:c})),()=>{function f(){let s={...n};return delete s.model,delete s.formOption,l(ns,A({class:`FormGenerator ${(n==null?void 0:n.type)==="search"?"FormGeneratorSearch":""} ${(n==null?void 0:n.type)==="dialog"?"FormGeneratorDialog":""}`,inline:(n==null?void 0:n.type)==="search","validate-on-rule-change":!1,"label-width":n.labelWidth||"auto"},s,{ref:e}),{default:()=>[n.formOption.map(g=>{let b;if(!(g.hasOwnProperty("show")&&g.show===!1))return l(H,A(g.formItem,{key:g.formItem.prop}),Ys(b=C(g))?b:{default:()=>[b]})}),s.disabled===!0||s.noFooter||!s.onSubmit?"":l(H,{class:`btnItem ${u.value?"searchItem":""}`},{default:()=>a!=null&&a.default?l(h,null,[a.default()[0].children]):(n==null?void 0:n.type)==="search"?D():l(h,null,[(n==null?void 0:n.type)==="dialog"?l(I,{onClick:g=>{var b,T;function R(q){return q.parentElement.classList.value.split(" ").includes("el-dialog")?q.parentElement:R(q.parentElement)}(T=(b=R(g.target).querySelector(".el-dialog__headerbtn"))==null?void 0:b.click)==null||T.call(b)}},{default:()=>[x("取消")]}):"",l(I,{type:"primary",onClick:m.submit},{default:()=>[x("确定")]})]),label:()=>""})]})}function C(s){var g,b,T,R,q,z,N,M,j;switch(c[s.formItem.prop]=i(),s.type){case"input":return l(is,A({ref:c[s.formItem.prop],clearable:!0,maxlength:30},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(g=s==null?void 0:s.control)==null?void 0:g.slot});case"input-number":return l(As,A({ref:c[s.formItem.prop],min:0,max:100},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),null);case"select":return l(Cs,A({ref:c[s.formItem.prop],clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o;return[(o=s==null?void 0:s.control)==null?void 0:o.option.map(t=>l(Fs,A(t,{key:t.value}),{...t==null?void 0:t.slot}))]}});case"tree-select":return l(ys,A({ref:c[s.formItem.prop],clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(b=s==null?void 0:s.control)==null?void 0:b.slot});case"cascader":return l(Ds,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(T=s==null?void 0:s.control)==null?void 0:T.slot});case"radio":return l(J,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o;return[(o=s==null?void 0:s.control)==null?void 0:o.option.map(t=>l(cs,A(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slot}))]}});case"radio-button":return l(J,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o;return[(o=s==null?void 0:s.control)==null?void 0:o.option.map(t=>l(rs,A(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slot}))]}});case"checkbox":return l(W,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o;return[(o=s==null?void 0:s.control)==null?void 0:o.option.map(t=>l(ts,A(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slot}))]}});case"checkbox-button":return l(W,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{default:()=>{var o;return[(o=s==null?void 0:s.control)==null?void 0:o.option.map(t=>l(es,A(t,{label:t.value,key:t.label}),{default:()=>[t.label],...t==null?void 0:t.slot}))]}});case"datetime":const U={datetimerange:"YYYY-MM-DD hh:mm:ss",daterange:"YYYY-MM-DD",datetime:"YYYY-MM-DD hh:mm:ss",date:"YYYY-MM-DD"}[((R=s==null?void 0:s.control)==null?void 0:R.type)||"date"];return l(ps,A({ref:c[s.formItem.prop],clearable:!0,format:U,"value-format":U},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(q=s==null?void 0:s.control)==null?void 0:q.slot});case"time":return l(os,A({ref:c[s.formItem.prop],clearable:!0},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(z=s==null?void 0:s.control)==null?void 0:z.slot});case"switch":return l(ls,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{modelValue:n.model[s.formItem.prop],"onUpdate:modelValue":o=>n.model[s.formItem.prop]=o}),{...(N=s==null?void 0:s.control)==null?void 0:N.slot});case"upload":return l(as,A({ref:c[s.formItem.prop]},s==null?void 0:s.control,{"file-list":n.model[s.formItem.prop],"onUpdate:file-list":o=>n.model[s.formItem.prop]=o}),{default:()=>n.disabled?"":l(I,{type:"primary"},{default:()=>[x("上传文件")]}),...(M=s==null?void 0:s.control)==null?void 0:M.slot});case"txt":return l(h,null,[n.model[s.formItem.prop]]);case"slot":return l(h,null,[(j=a[s.formItem.prop])==null?void 0:j.call(a,{form:n.model,data:n.model[s.formItem.prop]})])}}function D(){return l(h,null,[l(I,{type:"primary",onClick:m.submit,icon:Us},{default:()=>[x("搜索")]}),l(I,{onClick:m.reset,icon:Ss},{default:()=>[x("重置")]}),n.type==="search"&&n.formOption.length>v-1?l(h,null,[l(I,{text:!0,type:"primary",class:`expandBtn ${u.value?"up":"down"}`,onClick:()=>{d(!u.value)},icon:Ts},{default:()=>[u.value?"收起":"展开"]})]):""])}return f()}}}),Ls=k({__name:"AddDialog",setup(y,{expose:F}){let p=i(),a=i(!1),r=i("新增"),n=i({}),e=i([{type:"input",formItem:{prop:"key1",label:"文本1"}},{type:"select",formItem:{prop:"key2",label:"文本2"},control:{option:[{label:"文本1",value:"值1"},{label:"文本2",value:"值2"}]}}]);xs.setRequired(e.value);async function c(m){r.value=m?"修改":"新增",a.value=!0,O(async()=>{var d;(d=p.value())==null||d.resetFields(),r.value})}async function u(){a.value=!1,r.value,ms.success(`${r.value}成功`),v().Table.getTableData()}const v=P("getRefs");return F({openDialog:c}),(m,d)=>{const f=S("el-dialog");return _(),Q(f,{title:E(r),modelValue:E(a),"onUpdate:modelValue":d[0]||(d[0]=C=>K(a)?a.value=C:a=C),width:"500px"},{default:G(()=>[l(E(X),{type:"dialog",ref_key:"RefFormGenerator",ref:p,model:E(n),formOption:E(e),onSubmit:u},null,8,["model","formOption"])]),_:1},8,["title","modelValue"])}}}),Hs=k({__name:"Form",setup(y,{expose:F}){let p=i({}),a=i([{type:"input",formItem:{prop:"key1",label:"字段1"}},{type:"select",formItem:{prop:"key2",label:"字段2"},control:{option:[{label:"文本1",value:"值1"}]}},{type:"input",formItem:{prop:"key3",label:"字段3"}},{type:"input",formItem:{prop:"key4",label:"字段4"}},{type:"input",formItem:{prop:"key5",label:"字段5"}}]);function r(){n().Page.setPageNum(1),n().Table.getTableData()}const n=P("getRefs");return F({form:p}),(e,c)=>(_(),Q(E(X),{type:"search",model:E(p),formOption:E(a),onSubmit:r},null,8,["model","formOption"]))}}),Ws={class:"Table"},Js={class:"tool"},Ks=k({__name:"Table",setup(y,{expose:F}){let p=i(!1),a=i([{prop:"key1",label:"文本1"},{prop:"key2",label:"文本2"},{prop:"key3",label:"文本3"},{prop:"key4",label:"文本4"},{prop:"key5",label:"文本5"}]),r=i([]);async function n(){c(),p.value=!0,p.value=!1}function e(u){c().AddDialog.openDialog(u)}ds(()=>{n()});const c=P("getRefs");return F({getTableData:n}),(u,v)=>{const m=S("el-button");return _(),w("div",Ws,[B("div",Js,[l(m,{type:"primary",onClick:v[0]||(v[0]=d=>e())},{default:G(()=>[x("新增")]),_:1})]),l(E(_s),{data:E(r),loading:E(p),tableOption:E(a)},{operation:G(d=>[l(m,{link:"",type:"primary",onClick:f=>e(d.row.id)},{default:G(()=>[x("编辑")]),_:2},1032,["onClick"]),l(m,{link:"",type:"primary"},{default:G(()=>[x("删除")]),_:1})]),_:1},8,["data","loading","tableOption"])])}}}),Qs={class:"Container"},Xs=k({__name:"index",setup(y){let F=i(),p=i(),a=i(),r=i();return fs("getRefs",()=>({Form:F.value,Table:p.value,Page:a.value,AddDialog:r.value})),(n,e)=>(_(),w("div",Qs,[l(Hs,{ref_key:"RefForm",ref:F,class:"Form"},null,512),l(Ks,{ref_key:"RefTable",ref:p,class:"Table"},null,512),l(Es,{ref_key:"RefPage",ref:a,class:"Page"},null,512),l(Ls,{ref_key:"RefAddDialog",ref:r},null,512)]))}}),Zs=B("h1",{id:"模板化模块",tabindex:"-1"},[x("模板化模块 "),B("a",{class:"header-anchor",href:"#模板化模块","aria-hidden":"true"},"#")],-1),sn=B("p",null,"扁平化组件，将父级组件作为通信组件",-1),nn={class:"vp-raw"},an=gs("",14),pn=JSON.parse('{"title":"模板化模块","description":"","frontmatter":{},"headers":[{"level":2,"title":"文件结构","slug":"文件结构","link":"#文件结构","children":[]},{"level":2,"title":"index.vue（通信组件）","slug":"index-vue-通信组件","link":"#index-vue-通信组件","children":[]},{"level":2,"title":"Form.vue（搜索表单组件）","slug":"form-vue-搜索表单组件","link":"#form-vue-搜索表单组件","children":[]},{"level":2,"title":"Table.vue（列表组件）","slug":"table-vue-列表组件","link":"#table-vue-列表组件","children":[]},{"level":2,"title":"AddDialog.vue（新增、编辑表单组件）","slug":"adddialog-vue-新增、编辑表单组件","link":"#adddialog-vue-新增、编辑表单组件","children":[]},{"level":2,"title":"Page.vue（分页组件）","slug":"page-vue-分页组件","link":"#page-vue-分页组件","children":[]},{"level":2,"title":"global.scss（公共样式）","slug":"global-scss-公共样式","link":"#global-scss-公共样式","children":[]}],"relativePath":"example/module.md"}'),ln={name:"example/module.md"},en=Object.assign(ln,{setup(y){return(F,p)=>(_(),w("div",null,[Zs,sn,B("div",nn,[l(Xs)]),an]))}});export{pn as __pageData,en as default};
